/*! MathLib v0.3.5 MathLib.de | MathLib.de/en/license */
var __extends=this.__extends||function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c},MathLib;(function(a){a.version="0.3.5",a.apery=1.2020569031595942,a.e=Math.E,a.epsilon=Number.EPSILON||function(){var a,b;for(a=1;1+a!==1;a=a/2)b=a;return b}(),a.eulerMascheroni=.5772156649015329,a.goldenRatio=1.618033988749895,a.pi=Math.PI,a.isArrayLike=function(a){return typeof a=="object"&&"length"in a};var b={array:Object.getPrototypeOf([]),func:Object.getPrototypeOf(function(){}),object:Object.getPrototypeOf({}),functn:function(){}},c="__proto__",d=function(a){var b=[];return a.forEach(function(a){Array.isArray(a)?b=b.concat(d(a)):b.push(a)}),b},e=function(a,b){for(var c in b)typeof a[c]=="object"&&typeof b[c]=="object"?a[c]=e(a[c],b[c]):a[c]=b[c];return a},f=function(a){if(a.length===2)return new THREE.Vector2(a[0],a[1]);if(a.length===3)return new THREE.Vector3(a[0],a[1],a[2])};a.prototypes=b,a.extend=function(b,c,d,e){e=e||{enumerable:!0};var f=a[b]||a;Object.defineProperty(f,c,{value:d,writable:e.writable,enumerable:e.enumerable,configurable:e.configurable})},a.extendPrototype=function(a,c,d,e){e=e||{enumerable:!0},Object.defineProperty(b[a],c,{value:d,writable:e.writable,enumerable:e.enumerable,configurable:e.configurable})};var g=function(){function b(a){this.type="MathML";var b=new DOMParser,c,d;typeof a!="string"&&(a=a.toContentMathML()),a=a.replace(/\n/g,""),a=a.replace(/((?!cs)[^>]{2})>(\s)*</g,"$1><"),a=a.replace(/&(\w*);/g,"#$1;"),c=b.parseFromString(a,"application/xml");var e,f=null,g=[];e=function(a){var b={},c,d;if(a.attributes)for(c=0,d=a.attributes.length;c<d;c++)b[a.attributes[c].name]=a.attributes[c].value;var h=Object.create({},{attributes:{value:b},nodeName:{value:a.nodeName},parentNode:{value:g[g.length-1]},prevNode:{value:f}});f&&(f.nextNode=h),f=h,g.push(h),h.childNodes=Array.prototype.slice.call(a.childNodes).map(e),g.pop();var i=function(a){var b="",c;for(c in a.attributes)a.attributes.hasOwnProperty(c)&&(b+=" "+c+'="'+a.attributes[c]+'"');return b};h.childNodes.length!==0?h.innerMathML=h.childNodes.reduce(function(a,b,c,d){return a+b.outerMathML},""):h.innerMathML="",h.childNodes.length===0?h.nodeName==="#text"?h.outerMathML=a.textContent.replace(/#(\w*);/g,"&$1;"):h.outerMathML="<"+h.nodeName+i(h)+"/>":h.outerMathML="<"+h.nodeName+i(h)+">"+h.innerMathML+"</"+h.nodeName+">";if(h.nodeName==="lambda"){h.bvars=[];for(c=0,d=h.childNodes.length;c<d;c++)h.childNodes[c].nodeName==="bvar"?h.bvars.push(h.childNodes[c].childNodes[0].innerMathML):h.childNodes[c].nodeName==="domainofapplication"?h.domainofapplication=h.childNodes[c]:h.childNodes[c].nodeName==="apply"&&(h.apply=h.childNodes[c])}return h},d=e(c.childNodes[0]),this.attributes=d.attributes,this.childNodes=d.childNodes,this.innerMathML=d.innerMathML,this.outerMathML=d.outerMathML,this.nodeName=d.nodeName,this.nextNode=d.nextNode,this.parentNode=null,this.prevNode=null}return b.isSupported=function(){var a=!1,b,c,d;return document.createElementNS&&(b="http://www.w3.org/1998/Math/MathML",c=document.createElement("div"),c.style.position="absolute",d=c.appendChild(document.createElementNS(b,"math")).appendChild(document.createElementNS(b,"mfrac")),d.appendChild(document.createElementNS(b,"mi")).appendChild(document.createTextNode("xx")),d.appendChild(document.createElementNS(b,"mi")).appendChild(document.createTextNode("yy")),document.body.appendChild(c),a=c.offsetHeight>c.offsetWidth,document.body.removeChild(c)),a},b.prototype.loadMathJax=function(a){var b=document.createElement("script");b.type="text/javascript",b.src="http://cdn.mathjax.org/mathjax/latest/MathJax.js",a=a||'MathJax.Hub.Config({config: ["MMLorHTML.js"],jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML"],extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js"],TeX: {extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]}});',window.opera?b.innerHTML=a:b.text=a,document.getElementsByTagName("head")[0].appendChild(b)},b.prototype.parse=function(){var b,c,d,e,f,g,h,i,j,k,l=!1,m=[];return b={apply:function(b){var c=b.childNodes,d=c.shift(),e=d.nodeName,f={ident:"identity",power:"pow",rem:"mod",setdifference:"without"};e in f&&(e=f[e]);if(l){var g;return g=i(c[0]),g===undefined?new a.Functn(function(b){return a[e](b)},{contentMathMLString:'<math xmlns="http://www.w3.org/1998/Math/MathML"><lambda><bvar><ci>x</ci></bvar><domainofapplication><complexes/></domainofapplication>'+b.outerMathML+"</lambda></math>"}):new a.Functn(function(b){return a[e](g(b))},{contentMathMLString:b.outerMathML})}if(e in a)return c.length===1?a[e](i(c[0])):a[e].apply(null,c.map(i));var h=i(c.shift());return c.length===1?h[e](i(c[0])):h[e](c.map(i))},ci:function(b){return m.indexOf(b.innerMathML)===-1?a.MathML.variables[b.innerMathML]:new a.Functn(function(a){return a},{contentMathMLString:'<math xmlns="http://www.w3.org/1998/Math/MathML"><lambda><bvar><ci>x</ci></bvar><domainofapplication><complexes/></domainofapplication><apply><ident/><ci>x</ci></apply></lambda></math>'})},cn:function(b){var c=b.attributes.type?b.attributes.type:"number";if(c==="number")return+b.innerMathML;if(c==="complex-cartesian")return new a.Complex(+b.childNodes[0].outerMathML,+b.childNodes[2].outerMathML);if(c==="complex-polar")return a.Complex.polar(+b.childNodes[0].outerMathML,+b.childNodes[2].outerMathML)},cs:function(a){return a.innerMathML},lambda:function(b){var d,e,f,g,h;return m=m.concat(b.bvars),d=b.domainofapplication,c=b.apply,f=c.childNodes[0].nodeName,l=!0,h={ident:"identity",power:"pow",rem:"mod",setdifference:"without"},f in h&&(f=h[f]),g=i(c.childNodes.slice(1)),g[0]===undefined?new a.Functn(function(b){return a[f](b)},{contentMathMLString:b.outerMathML,domain:d}):new a.Functn(function(b){return a[f].apply(null,g.map(function(a){return typeof a=="function"?a(b):a}))},{contentMathMLString:b.outerMathML,domain:d})},math:function(a){return i(a.childNodes[0])},matrix:function(c){return new a.Matrix(c.childNodes.map(b.matrixrow))},matrixrow:function(a){return a.childNodes.map(i)},set:function(b){var c=b.attributes.type&&b.attributes.type==="multiset"?!0:!1;return new a.Set(b.childNodes.map(i),c)},"false":function(){return!1},"true":function(){return!0},exponentiale:function(){return a.e},imaginaryi:function(){return new a.Complex(0,1)},notanumber:function(){return NaN},pi:function(){return a.pi},eulergamma:function(){return a.eulerMascheroni},infinity:function(){return Infinity},vector:function(b){return new a.Vector(b.childNodes.map(i))}},i=function(a){return Array.isArray(a)?a.map(i):b[a.nodeName](a)},i(this)},b.prototype.toMathMLString=function(){var a={apply:function(b){var c=b.childNodes[0],d=b.childNodes.slice(1).map(function(b){return a[b.nodeName](b)}),e="";return c.nodeName==="plus"?e="<mrow>"+d.join("<mo>+</mo>")+"</mrow>":c.nodeName==="times"?e="<mrow>"+d.join("<mo>*</mo>")+"</mrow>":c.nodeName==="power"?e="<msup>"+d[0]+d[1]+"</msup>":e="<mrow><mi>"+c.nodeName+"</mi><mo>&af;</mo><mfenced>"+d.join("")+"</mfenced></mrow>",e},bvar:function(){return""},ci:function(a){return"<mi>"+a.innerMathML+"</mi>"},cn:function(a){return"<mn>"+a.innerMathML+"</mn>"},cs:function(a){return"<ms>"+a.innerMathML+"</ms>"},domainofapplication:function(){return""},lambda:function(b){return b.childNodes.reduce(function(b,c){return b+a[c.nodeName](c)},"")},"#text":function(a){return a.innerMathML}};return'<math xmlns="http://www.w3.org/1998/Math/MathML">'+a[this.childNodes[0].nodeName](this.childNodes[0])+"</math>"},b.prototype.toString=function(){return this.outerMathML},b.variables={},b.write=function c(a,b){var c;document.getElementById(a).innerHTML="<math>"+b+"</math>",typeof MathJax!="undefined"&&(c=MathJax.Hub.getAllJax(a)[0],MathJax.Hub.Queue(["Typeset",MathJax.Hub,a]))},b}();a.MathML=g;var h={};a.Functn=function(b,c){c=c||{};var d=function(e){if(typeof e=="number")return b.apply("",arguments);if(e.type==="functn"){var f=d.contentMathML.childNodes[0].childNodes[0].childNodes[0].outerMathML,g=e.contentMathML.childNodes[0].childNodes[0].childNodes[0].outerMathML,h=e.contentMathML.childNodes[0].childNodes[2].outerMathML.replace("<bvar>"+g+"</bvar>",""),i=d.contentMathML.childNodes[0].childNodes[2].outerMathML.replace(f,h),j='<math xmlns="http://www.w3.org/1998/Math/MathML"><lambda><bvar>'+g+"</bvar><domainofapplication><complexes/></domainofapplication>"+i+"</lambda></math>";return new a.Functn(function(a){return b(e(a))},{contentMathMLString:j})}return typeof e=="function"?function(a){return b(e(a))}:e.type==="complex"?e[c.name].apply(e,Array.prototype.slice.call(arguments,1)):e[c.name]()};for(var e in h)d[e]=h[e];d.type="functn",d.constructor=a.Functn;var f=c.contentMathMLString||"";return Object.defineProperties(d,{id:{value:c.name},contentMathML:{value:new a.MathML(f)}}),d},h.diff=function(a,b){return typeof b=="undefined"&&(b=1e-5),(this(a+b)-this(a-b))/(2*b)},h.quad=function(a,b,c){typeof c=="undefined"&&(c={});var d=this,e=["Calculation succeded","Minimum step size reached","Maximum function count exceeded","Infinite or NaN function value encountered"],f;return c.calls=3,c.warn=0,a===-Infinity&&(a=-Number.MAX_VALUE),b===Infinity&&(b=Number.MAX_VALUE),"minStep"in c||(c.minStep=1e-15),"maxCalls"in c||(c.maxCalls=1e4),"tolerance"in c||(c.tolerance=1e-5),f=i(d,a,b,d(a),d((a+b)/2),d(b),c),c.warnMessage=e[c.warn],f};var i=function(b,c,d,e,f,g,h){var j=d-c,k=(c+d)/2,l=b((c+k)/2),m=b((k+d)/2),n=j/6*(e+4*f+g),o=j/12*(e+4*l+2*f+4*m+g),p=o+(o-n)/15;return h.calls=h.calls+2,a.isFinite(p)?h.calls>h.maxCalls?(h.warn=Math.max(h.warn,2),p):Math.abs(o-p)<=h.tolerance?p:Math.abs(j)<h.minStep||k==c||k==d?(h.warn=Math.max(h.warn,1),p):i(b,c,k,e,l,f,h)+i(b,k,d,f,m,g,h):(h.warn=Math.max(h.warn,3),p)};h.toContentMathML=function(){return this.contentMathML},h.toContentMathMLString=function(a){return typeof a=="undefined"&&(a=""),this.contentMathML.outerMathML},h.toLaTeX=function(a){typeof a=="undefined"&&(a="");var b={apply:function(a){var c=a.childNodes[0],d=a.childNodes.slice(1).map(function(a){return b[a.nodeName](a)}),e="";return c.nodeName==="plus"?e=d.join("+"):c.nodeName==="times"?e=d.join("*"):c.nodeName==="power"?e=d[0]+"^{"+d[1]+"}":e="\\"+c.nodeName+"("+d.join(", ")+")",e},bvar:function(){return""},ci:function(b){return a||b.innerMathML},cn:function(a){return a.innerMathML},cs:function(a){return a.innerMathML},domainofapplication:function(){return""},lambda:function(a){return a.childNodes.reduce(function(a,c){return a+b[c.nodeName](c)},"")},"#text":function(a){return a.innerMathML}};return b[this.contentMathML.childNodes[0].nodeName](this.contentMathML.childNodes[0])},h.toMathML=function(){return this.contentMathML.toMathML()},h.toMathMLString=function(){return this.contentMathML.toMathMLString()},h.toString=function(a){typeof a=="undefined"&&(a="");var b={apply:function(a){var c=a.childNodes[0],d=a.childNodes.slice(1).map(function(a){return b[a.nodeName](a)}),e="";return c.nodeName==="plus"?e=d.join("+"):c.nodeName==="times"?e=d.join("*"):c.nodeName==="power"?e=d[0]+"^"+d[1]:e=c.nodeName+"("+d.join(", ")+")",e},bvar:function(){return""},ci:function(b){return a||b.innerMathML},cn:function(a){return a.innerMathML},cs:function(a){return a.innerMathML},domainofapplication:function(){return""},lambda:function(a){return a.childNodes.reduce(function(a,c){return a+b[c.nodeName](c)},"")},"#text":function(a){return a.innerMathML}};return b[this.contentMathML.childNodes[0].nodeName](this.contentMathML.childNodes[0])};var j='<math xmlns="http://www.w3.org/1998/Math/MathML"><lambda><bvar><ci>x</ci></bvar><domainofapplication><complexes/></domainofapplication><apply><',k="/><ci>x</ci></apply></lambda></math>",l={abs:Math.abs,arccos:Math.acos,arccot:function(a){return 1.5707963267948966-Math.atan(a)},arccsc:function(a){return Math.asin(1/a)},arcosh:Math.acosh||function(a){return Math.log(a+Math.sqrt(a*a-1))},arcoth:function(a){return.5*Math.log((a+1)/(a-1))},arcsch:function(a){return Math.log((1+Math.sqrt(1+a*a))/a)},arcsec:function(a){return Math.acos(1/a)},arcsin:Math.asin,arctan:Math.atan,arsech:function(a){return Math.log((1+Math.sqrt(1-a*a))/a)},arsinh:Math.asinh||function(a){return Math.log(a+Math.sqrt(a*a+1))},artanh:Math.atanh||function(a){return.5*Math.log((1+a)/(1-a))},ceil:function(a){return a===0?a:Math.ceil(a)},floor:Math.floor,cos:Math.cos,cosh:Math.cosh||function(a){return(Math.exp(a)+Math.exp(-a))/2},cot:function(a){return a===0?1/a:Math.tan(1.5707963267948966-a)},coth:function(a){return(Math.exp(a)+Math.exp(-a))/(Math.exp(a)-Math.exp(-a))},csc:function(a){return 1/Math.sin(a)},csch:function(a){return 2/(Math.exp(a)-Math.exp(-a))},exp:function(a){return Math.exp(a)},inverse:function(a){return 1/a},sec:function(a){return 1/Math.cos(a)},sech:function(a){return 2/(Math.exp(a)+Math.exp(-a))},sin:Math.sin,sinh:Math.sinh||function(a){return(Math.exp(a)-Math.exp(-a))/2},tan:Math.tan,tanh:Math.tanh||function(a){return(Math.exp(a)-Math.exp(-a))/(Math.exp(a)+Math.exp(-a))}};for(var m in l)l.hasOwnProperty(m)&&a.extend("",m,new a.Functn(l[m],{name:m,contentMathMLString:j+m+k}));a.identity=new a.Functn(function(a){return a},{contentMathMLString:j+"ident"+k});var n={arctan2:Math.atan2,binomial:function(a,b){var c=1,d;if(b<0||a>0&&b>a)return 0;a<0&&(c=Math.pow(-1,b),a=b-a-1),b>a/2&&(b=a-b);for(d=1;d<=b;d++)c*=(a+1-d)/d;return c},cbrt:function(b){var c,d,e,f;if(b===0||b!==b||b===Infinity||b===-Infinity)return b;f=a.sign(b)*Math.pow(Math.abs(b),1/3);for(;;){c=Math.pow(f,3),d=c+b,e=f*(d+b)/(d+c);if(a.isZero(e-f))break;f=e}return e},conjugate:function(a){return a},copy:function(a){return a},degToRad:function(a){return a*.017453292519943295},digitsum:function(a){var b=0;while(a>9)b+=a%10,a=Math.floor(a/10);return b+a},divide:function(b,c){return a.times(b,a.inverse(c))},divisors:function(b){var c=b===1?[]:[1],d,e;for(d=2,e=b/2;d<=e;d++)b%d===0&&c.push(d);return c.push(b),a.set(c)},factor:function(b){var c=[],d;b=Math.abs(b);while(b%2===0)b=b/2,c.push(2);d=3;while(b!==1){while(b%d===0)b=b/d,c.push(d);d+=2}return new a.Set(c,!0)},factorial:function(a){var b=1,c;for(c=1;c<=a;c=c+1)b*=c;return b},fallingFactorial:function(a,b,c){var d=1,e;c=c||1;for(e=0;e<b;e++)d*=a-e*c;return d},fibonacci:function(b){return Math.floor(Math.pow(a.goldenRatio,b)/Math.sqrt(5))},hypot:function(b,c){var d,e,f;return arguments.length===1?Math.abs(b):(arguments.length>2&&(d=Array.prototype.slice.call(arguments),d.shift(),c=a.hypot.apply(null,d)),b=a.abs(b),c=a.abs(c),b===Infinity||c===Infinity?Infinity:b===0&&c===0?0:(e=Math.max(b,c),f=Math.min(b,c),e*Math.sqrt(1+Math.pow(f/e,2))))},hypot2:function(){var a=Array.prototype.slice.call(arguments);return a.some(function(a){return a===Infinity||a===-Infinity})?Infinity:a.reduce(function(a,b){return a+b*b},0)},isFinite:function(a){return Math.abs(a)<Infinity},isInt:function(a){return a%1===0},isNaN:function(a){return a!==a},isNegZero:function(a){return 1/a===-Infinity},isOne:function(b){return Math.abs(b-1)<a.epsilon},isPosZero:function(a){return 1/a===Infinity},isPrime:function(a){var b=Math.sqrt(a),c;if(a%1===0&&a>1){if(a===2)return!0;if(a%2===0)return!1;for(c=3;c<=b;c+=2)if(a%c===0)return!1;return!0}return!1},isReal:function(a){return!0},isZero:function(b){return Math.abs(b)<a.epsilon},lg:function(a){return Math.log(a)/Math.ln10},ln:Math.log,log:function(a,b){return arguments.length===1&&(b=a,a=10),Math.log(b)/Math.log(a)},minus:function(b,c){return a.plus(b,a.negative(c))},mod:function(a,b){var c=a%b;return c>=0?c:c+b},negative:function(a){return-a},pow:function(a,b){return a===1||a===-1&&(b===Infinity||b===-Infinity)?1:Math.pow(a,b)},radToDeg:function(a){return a*57.29577951308232},random:Math.random,risingFactorial:function(a,b,c){var d=1,e;c=c||1;for(e=0;e<b;e++)d*=a+e*c;return d},round:function(a){return a===0?a:Math.round(a)},root:function(a,b){return arguments.length===1?Math.sqrt(a):Math.pow(a,1/b)},sign:function(a){return a&&(a<0?-1:1)},sqrt:function(a){return a===0?0:Math.sqrt(a)},trunc:function(a,b){return a.toFixed(b||0)},toLaTeX:function(a,b){return b?(a<0?"-":"+")+Math.abs(a):(a<0?"-":"")+Math.abs(a)},toMathMLString:function(a,b){return b?"<mo>"+(a<0?"-":"+")+"</mo><mn>"+Math.abs(a)+"</mn>":(a<0?"<mo>-</mo>":"")+"<mn>"+Math.abs(a)+"</mn>"},toString:function(a,b){return b?(a<0?"-":"+")+Math.abs(a):(a<0?"-":"")+Math.abs(a)}};a.toContentMathMLString=function(a){return typeof a=="number"?"<cn>"+a+"</cn>":a.toContentMathML()},a.and=function(){return Array.prototype.slice.call(arguments).every(function(a){return!!a})},a.or=function(){return Array.prototype.slice.call(arguments).some(function(a){return!!a})},a.xor=function(){return Array.prototype.slice.call(arguments).reduce(function(a,b){return a+b})%2!==0},a.not=function(a){return!a},a.compare=function(b,c){return a.type(b)!==a.type(c)?a.sign(a.type(b).localeCompare(a.type(c))):typeof b=="number"?a.sign(b-c):typeof b=="string"?b.localeCompare(c):b.compare(c)},a.type=function(a){return a===null?"null":a===undefined?"undefined":a.type?a.type:(a.constructor.name||Object.prototype.toString.call(a).slice(8,-1)).toLowerCase()},a.is=function(b,c){do{if(a.type(b)===c)return!0;b=Object.getPrototypeOf(Object(b))}while(b);return!1};var o={arithMean:function(b){return a.plus(b)/b.length},gcd:function(b){var c,d=function(a){return a!==c?a%c:a},e=function(a){return a!==0};b=b.filter(e).map(Math.abs);if(b.length===0)return 0;while(b.length>1)c=a.min(b),b=b.map(d).filter(e);return b[0]||c},geoMean:function(b){return a.root(a.times(b),b.length)},harmonicMean:function(b){return b.length/a.plus(b.map(a.inverse))},lcm:function(b){return a.times(b)/a.gcd(b)},max:function(a){return Math.max.apply(null,a)},min:function(a){return Math.min.apply(null,a)},plus:function(b){return b.length===0?0:b.reduce(function(b,c){var d,e,f,g;if(typeof b=="number"&&typeof c=="number")return b+c;if(b.type==="functn"||c.type==="functn"){f=b.type==="functn"?b.contentMathML.childNodes[0].apply.outerMathML:a.toContentMathMLString(b),g=c.type==="functn"?c.contentMathML.childNodes[0].apply.outerMathML:a.toContentMathMLString(c),d=b,e=c,b.type!=="functn"?d=function(){return b}:c.type!=="functn"&&(e=function(){return c});var h='<math xmlns="http://www.w3.org/1998/Math/MathML"><lambda><bvar><ci>x</ci></bvar><domainofapplication><complexes/></domainofapplication><apply><plus/>'+f+g+"</apply></lambda></math>";return new a.Functn(function(b){return a.plus(d(b),e(b))},{contentMathMLString:h})}if(typeof b=="object")return b.plus(c);if(typeof c=="object")return c.plus(b)})},times:function(b){return b.length===0?1:b.reduce(function(b,c){var d,e,f,g;if(typeof b=="number"&&typeof c=="number")return b*c;if(b.type==="functn"||c.type==="functn"){f=b.type==="functn"?b.contentMathML.childNodes[0].apply.outerMathML:a.toContentMathMLString(b),g=c.type==="functn"?c.contentMathML.childNodes[0].apply.outerMathML:a.toContentMathMLString(c),d=b,e=c,b.type!=="functn"?d=function(){return b}:c.type!=="functn"&&(e=function(){return c});var h='<math xmlns="http://www.w3.org/1998/Math/MathML"><lambda><bvar><ci>x</ci></bvar><domainofapplication><complexes/></domainofapplication><apply><times/>'+f+g+"</apply></lambda></math>";return new a.Functn(function(b){return a.times(d(b),e(b))},{contentMathMLString:h})}if(typeof b=="object")return b.times(c);if(typeof c=="object")return c.times(b)})}};a.isEqual=function(){return d(Array.prototype.slice.apply(arguments)).every(function(a,b,c){return a===c[0]?!0:typeof a=="number"&&typeof c[0]=="number"?Math.abs(a-c[0])<=3e-15:typeof a=="object"?a.isEqual(c[0]):typeof c[0]=="object"?c[0].isEqual(a):!1})};var p=function(b,c){return function(d){return typeof d=="number"?b.apply("",arguments):typeof d=="function"?function(a){return b(d(a))}:d.type==="set"?new a.Set(d.map(b)):d.type==="complex"?d[c].apply(d,Array.prototype.slice.call(arguments,1)):Array.isArray(d)?d.map(b):d[c]()}},q=function(b,c){return function(c){return a.type(c)==="set"?b(c.slice()):(a.type(c)!=="array"&&(c=Array.prototype.slice.apply(arguments)),b(c))}},r,s;for(r in n)n.hasOwnProperty(r)&&(s=n[r],Object.defineProperty(a,r,{value:p(n[r],r)}));for(r in o)o.hasOwnProperty(r)&&(s=o[r],Object.defineProperty(a,r,{value:q(o[r],r)}));var t=function(){function a(a,b){this.uuid=Date.now()+"",this.height=b.height||500,this.width=b.width||500;var c=document.getElementById(a),d,e=["<style scoped>",".MathLib_figure_"+this.uuid+"{margin: 1em auto; display: -webkit-flex; -webkit-flex-direction: column; -webkit-flex-wrap: nowrap; -webkit-justify-content: center; -webkit-align-content: center; -webkit-align-items: center;}",".MathLib_figcaption_"+this.uuid+" {font-family: Helvetica, sans-serif; font-size: 1em; color: #444; text-align: center; margin: 1em}",".MathLib_wrapper_"+this.uuid+" {width: "+this.width+"px; height: "+this.height+"px; position: relative;}",".MathLib_screen_"+this.uuid+" {width: "+this.width+"px; height: "+this.height+"px; position: absolute;}",".MathLib_contextMenuOverlay_"+this.uuid+" {display: none; position: fixed; top: 0; left: 0; z-index:100; width: 100vw; height: 100vh}",".MathLib_contextMenu_"+this.uuid+" {","position: relative;","top: 200px;","left: 200px;","z-index:1001;","padding: 5px 0 5px 0;","width: 200px;","border: 1px solid #ccc;","border-radius: 5px;","background: #FFFFFF;","box-shadow: 0 10px 10px rgba(0, 0, 0, 0.5);","font-family: Helvetica;","list-style-type: none;","}",".MathLib_contextMenu_item_"+this.uuid+" {","padding-left: 20px;","border-top: 1px solid transparent;","border-bottom: 1px solid transparent;","-webkit-user-select: none;","}",".MathLib_contextMenu_item_"+this.uuid+":hover {","border-top: 1px solid #5b82e8;","border-bottom: 1px solid #4060a7;","background-color: #658bf1;","background-image:         linear-gradient(to bottom, #658bf1, #2a63ee);","color: white;","}",".MathLib_contextMenu_item_"+this.uuid+" > .MathLib_contextMenu_"+this.uuid+" {","display: none;","position: absolute;","left: 200px;","top: 19px;","}",".MathLib_contextMenu_item_"+this.uuid+":hover > .MathLib_contextMenu_"+this.uuid+" {","display: block;","color: #000000;","}","</style>",'<figure class="MathLib_figure_'+this.uuid+'">','<div class="MathLib_wrapper_'+this.uuid+'"></div>',b.figcaption?'<figcaption class="MathLib_figcaption_'+this.uuid+'">'+b.figcaption+"</figcaption>":"","</figure>",'<div class="MathLib_contextMenuOverlay_'+this.uuid+'">','<ul class="MathLib_contextMenu_'+this.uuid+'">','<li class="MathLib_contextMenu_ite_'+this.uuid+'m" id="MathLib_screenshot_item">Save screenshot</li>','<li class="MathLib_contextMenu_item_'+this.uuid+'">Options','<ul class="MathLib_contextMenu_'+this.uuid+'">','<li class="MathLib_contextMenu_item_'+this.uuid+'">Axis','<ul class="MathLib_contextMenu_'+this.uuid+'">','<li class="MathLib_contextMenu_item">Axis1</li>','<li class="MathLib_contextMenu_item">Axis2</li>',"</ul>","</li>",'<li class="MathLib_contextMenu_item">Grid','<ul class="MathLib_contextMenu">','<li class="MathLib_contextMenu_item">Grid1</li>','<li class="MathLib_contextMenu_item">Grid2</li>',"</ul>","</li>","</li>","</ul>","</li>",'<li class="MathLib_contextMenu_item" id="MathLib_fullscreen_item">Enter Fullscreen</li>',"</ul>","</div>"].join("");c.innerHTML=e,this.container=c,this.figure=c.getElementsByClassName("MathLib_figure_"+this.uuid)[0],this.wrapper=c.getElementsByClassName("MathLib_wrapper_"+this.uuid)[0],this.contextMenu=c.getElementsByClassName("MathLib_contextMenu_"+this.uuid)[0],this.contextMenuOverlay=c.getElementsByClassName("MathLib_contextMenuOverlay_"+this.uuid)[0]}return a}();a.Screen=t;var u=function(){function a(a,b,c){var d=this;this.screen=a,this.id=b,this.zIndex=c,this.stack=[],this.transformation=a.transformation;var e;if(a.renderer==="Canvas")e=document.createElement("canvas"),e.classList.add("MathLib_screen_"+a.uuid),e.width=a.width,e.height=a.height,a.wrapper.appendChild(e),this.element=e,this.ctx=e.getContext("2d"),this.applyTransformation=function(){var a=d.transformation;d.ctx.setTransform(a[0][0],a[1][0],a[0][1],a[1][1],a[0][2],a[1][2])},this.applyTransformation(),b==="back"?this.draw=function(){var b=-a.translation.y/a.scale.y,c=(a.height-a.translation.y)/a.scale.y,e=-a.translation.x/a.scale.x,f=(a.width-a.translation.x)/a.scale.x;this.ctx.fillStyle=x(a.background),this.ctx.fillRect(e,c,f-e,b-c),y.draw.call(d)}:b==="grid"?(this.ctx.strokeStyle=x(a.grid.color)||"#cccccc",this.ctx.fillStyle="rgba(255,255,255,0)",this.draw=function(){d.ctx.lineWidth=4/(a.scale.x-a.scale.y),w.call(d)}):b==="axis"?(this.ctx.strokeStyle=x(a.axis.color)||"#000000",this.draw=function(){d.ctx.lineWidth=4/(a.scale.x-a.scale.y),v.call(d)}):(this.ctx.strokeStyle="#000000",this.ctx.fillStyle="rgba(255,255,255,0)",this.draw=function(){d.ctx.lineWidth=4/(a.scale.x-a.scale.y),y.draw.call(d)}),this.circle=y.circle,this.line=y.line,this.path=y.path,this.pixel=y.pixel,this.text=y.text;else if(a.renderer==="SVG"){var f=document.createElementNS("http://www.w3.org/2000/svg","g"),g=a.transformation;f.setAttribute("transform","matrix("+g[0][0]+","+g[1][0]+","+g[0][1]+","+g[1][1]+","+g[0][2]+","+g[1][2]+")"),a.element.appendChild(f),this.ctx=f,b==="back"?this.draw=function(){var b=-a.translation.y/a.scale.y,c=(a.height-a.translation.y)/a.scale.y,e=-a.translation.x/a.scale.x,f=(a.width-a.translation.x)/a.scale.x;z.draw.call(d)}:b==="grid"?(f.setAttribute("stroke",x(a.grid.color)||"#cccccc"),this.draw=function(){f.setAttribute("stroke-width",4/(a.scale.x-a.scale.y)+""),w.call(d)}):b==="axis"?(f.setAttribute("stroke",x(a.axis.color)||"#000000"),this.draw=function(){f.setAttribute("stroke-width",4/(a.scale.x-a.scale.y)+""),v.call(d)}):this.draw=z.draw,this.circle=z.circle,this.line=z.line,this.path=z.path,this.pixel=z.pixel,this.text=z.text}a.layer.splice(c,0,this)}return a}();a.Layer=u;var v=function(){var a=this.screen,b={stroke:x(this.screen.axis.color),"stroke-width":-1/a.transformation[1][1]},c={strokeStyle:x(this.screen.axis.textColor),fillStyle:x(this.screen.axis.textColor)},d=-a.translation.y/a.scale.y,e=(a.height-a.translation.y)/a.scale.y,f=-a.translation.x/a.scale.x,g=(a.width-a.translation.x)/a.scale.x,h=10/a.transformation[0][0],i=-10/a.transformation[1][1],j=1-Math.floor(Math.log(-a.transformation[1][1])/Math.LN10-.3),k=1-Math.floor(Math.log(+a.transformation[0][0])/Math.LN10-.3),l=Math.pow(10,j),m=Math.pow(10,k),n;this.line([[f,0],[g,0]],!1,!0),this.line([[0,e],[0,d]],!1,!0);if(a.grid.tick){for(n=-l;n>=f;n-=l)this.line([[n,-i],[n,i]],!1,!0);for(n=l;n<=g;n+=l)this.line([[n,-i],[n,i]],!1,!0);for(n=-m;n>=e;n-=m)this.line([[-h,n],[h,n]],!1,!0);for(n=m;n<=d;n+=m)this.line([[-h,n],[h,n]],!1,!0)}var o=Math.max(0,Math.min(20,-k)),p=Math.max(0,Math.min(20,-j));for(n=-l;n>=f;n-=l)this.text(n.toFixed(p),n,-2*i,c,!0);for(n=l;n<=g;n+=l)this.text(n.toFixed(p),n,-2*i,c,!0);for(n=-m;n>=e;n-=m)this.text(n.toFixed(o),-2*h,n,c,!0);for(n=m;n<=d;n+=m)this.text(n.toFixed(o),-2*h,n,c,!0);return this},w=function(){if(!this.screen.grid)return this;var b=this.screen,c=-b.translation.y/b.scale.y,d=(b.height-b.translation.y)/b.scale.y,e=-b.translation.x/b.scale.x,f=(b.width-b.translation.x)/b.scale.x,g=Math.pow(10,1-Math.floor(Math.log(-b.transformation[1][1])/Math.LN10-.3)),h=Math.pow(10,1-Math.floor(Math.log(+b.transformation[0][0])/Math.LN10-.3)),i;if(b.grid.type==="cartesian"){for(i=d-d%g;i<=c;i+=g)this.line([[e,i],[f,i]],!1,!0);for(i=e-e%h;i<=f;i+=h)this.line([[i,d],[i,c]],!1,!0)}else if(b.grid.type==="polar"){for(i=0;i<2*Math.PI;i+=b.grid.angle)this.line([[0,0],[50*Math.cos(i),50*Math.sin(i)]],!1,!0);var j=Math.sqrt(Math.max(c*c,d*d)+Math.max(e*e,f*f)),k=0;for(i=k;i<=j;i+=Math.min(h,g))this.circle(new a.Circle([0,0,1],i),!1,!0)}return this},x=function(a){return a===undefined?undefined:typeof a=="string"?a:"#"+("00000"+a.toString(16)).slice(-6)},y={normalizeOptions:function(a){var b={};return"fillColor"in a?b.fillStyle=a.fillColor:"color"in a&&(b.fillStyle=a.color),"font"in a&&(b["font-family"]=a.font),"fontSize"in a&&(b["font-size"]=a.fontSize),"lineColor"in a?b.strokeStyle=a.lineColor:"color"in a&&(b.strokeStyle=a.color),b},applyTransformation:function(){var a=this.transformation;this.layer.forEach(function(b){b.ctx.setTransform(a[0][0],a[1][0],a[0][1],a[1][1],a[0][2],a[1][2])})},draw:function(a,b){typeof b=="undefined"&&(b={});if(arguments.length===0){var c=this;this.stack.forEach(function(a,b){a.type==="text"&&c.text(a.object,a.x,a.y,a.options,!0),a.type==="pixel"?c.pixel(a.object,a.t,a.r,a.b,a.l,a.options,!0):c[a.type](a.object,a.options,!0)})}else if(a.type==="circle")this.circle(a,b);else if(a.type==="line")this.line(a,b);else if(Array.isArray(a)){var c=this;a.forEach(function(a){c[a.type](a,b)})}},circle:function(a,b,c){typeof c=="undefined"&&(c=!1);var d=this.screen,e=this.ctx,f,g;e.save(),e.lineWidth=(b.lineWidth||4)/(d.scale.x-d.scale.y);if(b){g=y.normalizeOptions(b);for(f in g)g.hasOwnProperty(f)&&(e[f]=g[f]);"setLineDash"in e&&e.setLineDash("dash"in b?b.dash:[]),"lineDashOffset"in e&&(e.lineDashOffset="dashOffset"in b?b.dashOffset:0)}return e.beginPath(),e.arc(a.center[0],a.center[1],a.radius,0,2*Math.PI),e.closePath(),e.fill(),e.stroke(),e.restore(),c||this.stack.push({type:"circle",object:a,options:b}),this},line:function(a,b,c){typeof c=="undefined"&&(c=!1);var d=this.screen,e=this.screen.getLineEndPoints(a),f=this.ctx,g,h;f.save(),f.lineWidth=(b.lineWidth||4)/(d.scale.x-d.scale.y);if(b){h=y.normalizeOptions(b);for(g in h)h.hasOwnProperty(g)&&(f[g]=h[g]);"setLineDash"in f&&f.setLineDash("dash"in b?b.dash:[]),"lineDashOffset"in f&&(f.lineDashOffset="dashOffset"in b?b.dashOffset:0)}return f.beginPath(),f.moveTo(e[0][0],e[0][1]),f.lineTo(e[1][0],e[1][1]),f.stroke(),f.closePath(),f.restore(),c||this.stack.push({type:"line",object:a,options:b}),this},path:function(a,b,c){typeof c=="undefined"&&(c=!1);var d=this.screen,e=this.ctx,f,g,h,i,j,k,l=2/(d.scale.x-d.scale.y),m,n;m=("from"in b?b.from:-d.translation.x/d.scale.x)-l,n=("to"in b?b.to:(d.width-d.translation.x)/d.scale.x)+l,e.save(),e.lineWidth=(b.lineWidth||4)/(d.scale.x-d.scale.y);if(b){g=y.normalizeOptions(b);for(f in g)g.hasOwnProperty(f)&&(e[f]=g[f]);"setLineDash"in e&&e.setLineDash("dash"in b?b.dash:[]),"lineDashOffset"in e&&(e.lineDashOffset="dashOffset"in b?b.dashOffset:0)}if(typeof a=="function"){h=[];for(k=m;k<=n;k+=l)h.push([k,a(k)])}else if(typeof a[0]=="function"){h=[],i=a[0],j=a[1];for(k=m;k<=n;k+=l)h.push([i(k),j(k)])}else h=a;return e.beginPath(),e.moveTo(h[0][0],h[0][1]),h.forEach(function(a){e.lineTo(a[0],a[1])}),e.stroke(),e.closePath(),e.restore(),c||this.stack.push({type:"path",object:a,options:b}),this},pixel:function(a,b,c,d,e,f,g){typeof g=="undefined"&&(g=!1);var h=this.screen,i=-h.translation.y/h.scale.y,j=(h.height-h.translation.y)/h.scale.y,k=-h.translation.x/h.scale.x,l=(h.width-h.translation.x)/h.scale.x,m=this.ctx,n,o,p,q,r;b=Math.min(i,b),c=Math.min(l,c),d=Math.max(j,d),e=Math.max(k,e);var s=Math.floor(-b*h.scale.y),t=Math.floor(c*h.scale.x),u=Math.floor(-d*h.scale.y),v=Math.floor(e*h.scale.x),w=t-v,x=u-s,y=m.createImageData(w,x),z;for(var r=s,A=0;r>u;r--)for(var q=v;q<t;q++,A++)z=a(q/h.scale.x,r/h.scale.y),y.data[4*A]=z[0],y.data[4*A+1]=z[1],y.data[4*A+2]=z[2],y.data[4*A+3]=z[3];return m.putImageData(y,(k-e)*h.scale.x,(b-i)*h.scale.y),g||this.stack.push({type:"pixel",object:a,t:b,r:c,b:d,l:e,options:f}),this},text:function(a,b,c,d,f){typeof f=="undefined"&&(f=!1);var g={font:"Helvetica",fontSize:10,fillColor:"rgba(0, 0, 0, 1)",lineColor:"rgba(0, 0, 0, 1)",lineWidth:.05},h,i,j;h=this.ctx,f?j=d:j=e(g,d);for(i in j)j.hasOwnProperty(i)&&(h[i]=j[i]);h.font=j.fontSize*this.screen.range.x+"px "+j.font,h.font="10px Helvetica",h.textAlign="center",h.textBaseline="middle";var k=this.screen.transformation;return h.save(),h.transform(1/k[0][0],0,0,1/k[1][1],0,0),h.fillText(a,k[0][0]*b,k[1][1]*c),h.restore(),f||this.stack.push({type:"text",object:a,x:b,y:c,options:j}),this}},z={normalizeOptions:function(a){var b={};return"fillColor"in a?b.fill=a.fillColor:"color"in a&&(b.fill=a.color),"font"in a&&(b["font-family"]=a.font),"fontSize"in a&&(b["font-size"]=a.fontSize),"size"in a&&(b.size=a.size),"lineColor"in a?b.stroke=a.lineColor:"color"in a&&(b.stroke=a.color),"dash"in a&&a.dash.length!==0&&(b["stroke-dasharray"]=a.dash),"dashOffset"in a&&a.dashOffset!==0&&(b["stroke-dashoffset"]=a.dashOffset),b},applyTransformation:function(){var a=this.transformation;this.layer.forEach(function(b){b.ctx.setAttribute("transform","matrix("+a[0][0]+","+a[1][0]+","+a[0][1]+","+a[1][1]+","+a[0][2]+","+a[1][2]+")")})},draw:function(a,b){typeof b=="undefined"&&(b={});if(arguments.length===0){var c=this;this.stack.forEach(function(a,b){a.type==="text"&&c.text(a.object,a.x,a.y,a.options,!0),a.type==="pixel"?c.pixel(a.object,a.t,a.r,a.b,a.l,a.options,!0):c[a.type](a.object,a.options,!0)})}else if(a.type==="circle")this.circle(a,b);else if(a.type==="line")this.line(a,b);else if(Array.isArray(a)){var c=this;a.forEach(function(a){c[a.type](a,b)})}},circle:function(a,b,c){var d=this.screen,e,f,g=document.createElementNS("http://www.w3.org/2000/svg","circle");g.setAttribute("cx",a.center[0]),g.setAttribute("cy",a.center[1]),g.setAttribute("r",a.radius);if(b){g.setAttribute("stroke-width",(b.lineWidth||4)/(d.scale.x-d.scale.y)+""),f=z.normalizeOptions(b);for(e in f)f.hasOwnProperty(e)&&g.setAttribute(e,f[e])}return this.ctx.appendChild(g),c||this.stack.push({type:"circle",object:a,options:b}),this},line:function(a,b,c){var d=this.screen,e=this.screen.getLineEndPoints(a),f,g,h=document.createElementNS("http://www.w3.org/2000/svg","line");h.setAttribute("x1",e[0][0]),h.setAttribute("y1",e[0][1]),h.setAttribute("x2",e[1][0]),h.setAttribute("y2",e[1][1]);if(b){h.setAttribute("stroke-width",(b.lineWidth||4)/(d.scale.x-d.scale.y)+""),g=z.normalizeOptions(b);for(f in g)g.hasOwnProperty(f)&&h.setAttribute(f,g[f])}return this.ctx.appendChild(h),c||this.stack.push({type:"line",object:a,options:b}),this},path:function(a,b,c){var d=this.screen,e=document.createElementNS("http://www.w3.org/2000/svg","path"),f=2/(d.scale.x-d.scale.y),g,h,i,j,k,l,m,n,o;h=("from"in b?b.from:-d.translation.x/d.scale.x)-f,i=("to"in b?b.to:(d.width-d.translation.x)/d.scale.x)+f;if(typeof a=="function"){o=[];for(n=h;n<=i;n+=f)o.push([n,a(n)])}else if(typeof a[0]=="function"){o=[],l=a[0],m=a[1];for(n=h;n<=i;n+=f)o.push([l(n),m(n)])}else o=a;g="M"+o.reduce(function(a,b){return a+" L"+b.join(" ")}),e.setAttribute("d",g),e.setAttribute("stroke-width",(b.lineWidth||4)/(d.scale.x-d.scale.y)+"");if(b){k=z.normalizeOptions(b);for(j in k)k.hasOwnProperty(j)&&e.setAttribute(j,k[j])}return this.ctx.appendChild(e),c||this.stack.push({type:"path",object:a,options:b}),this},pixel:function(a,b,c,d,e,f,g){typeof g=="undefined"&&(g=!1);var h=this.screen,i=-h.translation.y/h.scale.y,j=(h.height-h.translation.y)/h.scale.y,k=-h.translation.x/h.scale.x,l=(h.width-h.translation.x)/h.scale.x,m=this.ctx,n=document.createElement("canvas"),o=n.getContext("2d"),p=document.createElementNS("http://www.w3.org/2000/svg","image"),q=document.createElementNS("http://www.w3.org/2000/svg","g"),r,s,t,u,v,w,x,y=h.transformation;n.width=h.width,n.height=h.height,o.setTransform(y[0][0],y[1][0],y[0][1],y[1][1],y[0][2],y[1][2]),q.setAttribute("transform","matrix("+1/y[0][0]+",0,0,"+1/y[1][1]+",-"+y[0][2]/y[0][0]+","+ -y[1][2]/y[1][1]+")"),p.setAttribute("width",h.width+"px"),p.setAttribute("height",h.height+"px"),p.setAttribute("x","0"),p.setAttribute("y","0"),b=Math.min(i,b),c=Math.min(l,c),d=Math.max(j,d),e=Math.max(k,e);var z=Math.floor(-b*h.scale.y),A=Math.floor(c*h.scale.x),B=Math.floor(-d*h.scale.y),C=Math.floor(e*h.scale.x),D=A-C,E=z-B,F=o.createImageData(D,E);for(v=z,w=0;v>B;v--)for(u=C;u<A;u++,w++)x=a(u/h.scale.x,v/h.scale.y),F.data[4*w]=x[0],F.data[4*w+1]=x[1],F.data[4*w+2]=x[2],F.data[4*w+3]=x[3];return o.putImageData(F,0,0),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n.toDataURL()),q.appendChild(p),this.ctx.appendChild(q),g||this.stack.push({type:"pixel",object:a,t:b,r:c,b:d,l:e,options:f}),this},text:function(a,b,c,d,e){var f=this.screen,g=document.createElementNS("http://www.w3.org/2000/svg","text"),h=this.ctx,i,j;return g.textContent=a,g.setAttribute("x",b*f.scale.x+""),g.setAttribute("y",c*f.scale.y+""),g.setAttribute("transform","matrix("+1/f.scale.x+" , 0, 0, "+1/f.scale.y+", 0, 0)"),g.setAttribute("fill",x(d.color)||"#000000"),g.setAttribute("fill-opacity","1"),g.setAttribute("stroke",x(d.color)||"#000000"),g.setAttribute("text-anchor","middle"),g.setAttribute("alignment-baseline","middle"),this.ctx.appendChild(g),e||this.stack.push({type:"text",object:a,x:b,y:c,options:d}),this}},A=function(b){function c(c,d){var f=this;b.call(this,c,d);var f=this,g={axis:{color:0,textColor:0,tick:{x:1,y:1}},grid:{angle:Math.PI/8,color:13421772,type:"cartesian",tick:{x:1,y:1,r:1}},interaction:{allowPan:!0,allowZoom:!0,zoomSpeed:1},background:16777215,lookAt:{x:0,y:0},range:{x:1,y:1},figcaption:"",renderer:"Canvas",transformation:new a.Matrix([[Math.min(this.height,this.width)/2,0,this.width/2],[0,-Math.min(this.height,this.width)/2,this.height/2],[0,0,1]])},h=e(g,d),i,j=h.transformation;this.background=h.background,this.renderer=h.renderer,this.interaction=h.interaction,this.axis=h.axis,this.grid=h.grid,this.applyTransformation=function(){},this.translation={},this.scale={},this.transformation=j,Object.defineProperty(this.translation,"x",{get:function(){return f.transformation[0][2]},set:function(a){f.transformation[0][2]=a,f.applyTransformation()}}),Object.defineProperty(this.translation,"y",{get:function(){return f.transformation[1][2]},set:function(a){f.transformation[1][2]=a,f.applyTransformation()}}),Object.defineProperty(this.scale,"x",{get:function(){return f.transformation[0][0]},set:function(a){f.transformation[0][0]=a,f.applyTransformation()}}),Object.defineProperty(this.scale,"y",{get:function(){return f.transformation[1][1]},set:function(a){f.transformation[1][1]=a,f.applyTransformation()}}),this.lookAt={},this.range={},Object.defineProperty(this.lookAt,"x",{get:function(){return(f.width/2-f.transformation[0][2])/f.transformation[0][0]},set:function(a){f.transformation[0][2]=f.width/2-a*f.transformation[0][0],f.applyTransformation()}}),Object.defineProperty(this.lookAt,"y",{get:function(){return(f.height/2-f.transformation[1][2])/f.transformation[1][1]},set:function(a){f.transformation[1][2]=f.height/2-a*f.transformation[1][1],f.applyTransformation()}}),Object.defineProperty(this.range,"x",{get:function(){return f.width/(2*f.transformation[0][0])},set:function(a){f.transformation[0][0]=.5*f.width/a,f.applyTransformation()}}),Object.defineProperty(this.range,"y",{get:function(){return-f.height/(2*f.transformation[1][1])},set:function(a){f.transformation[1][1]=-0.5*f.height/a,f.applyTransformation()}}),this.range.x=h.range.x,this.range.y=h.range.y,this.lookAt.x=h.lookAt.x,this.lookAt.y=h.lookAt.y;if(h.renderer==="SVG"){i=document.createElementNS("http://www.w3.org/2000/svg","svg"),i.classList.add("MathLib_screen_"+this.uuid),i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),i.setAttribute("height",this.height+"px"),i.setAttribute("width",this.width+"px"),i.setAttribute("version","1.1"),i.setAttribute("stroke","#000000"),i.setAttribute("stroke-opacity","1"),i.setAttribute("fill","#ffffff"),i.setAttribute("fill-opacity","0"),this.element=i,this.wrapper.appendChild(i);if("background"in d){var k=document.createElementNS("http://www.w3.org/2000/svg","rect");k.setAttribute("x","0px"),k.setAttribute("y","0px"),k.setAttribute("width",this.width+"px"),k.setAttribute("height",this.height+"px"),k.setAttribute("fill",x(d.background)),k.setAttribute("fill-opacity","1"),this.element.appendChild(k)}}this.layer=[],this.layer.back=new a.Layer(this,"back",0),this.layer.grid=new a.Layer(this,"grid",1),this.layer.axis=new a.Layer(this,"axis",2),this.layer.main=new a.Layer(this,"main",3),h.renderer==="Canvas"?(this.layer.main.element.onmouseup=function(a){return f.onmouseup(a)},this.layer.main.element.onmousedown=function(a){return f.onmousedown(a)},this.layer.main.element.onmousemove=function(a){return f.onmousemove(a)},this.layer.main.element.onmousewheel=function(a){return f.onmousewheel(a)},this.layer.main.element.DOMMouseScroll=function(a){return f.onmousewheel(a)}):h.renderer==="SVG"&&(this.wrapper.onmouseup=function(a){return f.onmouseup(a)},this.wrapper.onmousedown=function(a){return f.onmousedown(a)},this.wrapper.onmousemove=function(a){return f.onmousemove(a)},this.wrapper.onmousewheel=function(a){return f.onmousewheel(a)},this.wrapper.DOMMouseScroll=function(a){return f.onmousewheel(a)}),h.renderer==="Canvas"?(this.applyTransformation=y.applyTransformation,this.draw=function(a,b){typeof b=="undefined"&&(b={});var c=this;if(arguments.length===0){var d=-this.translation.y/this.scale.y,e=(this.height-this.translation.y)/this.scale.y,f=-this.translation.x/this.scale.x,g=(this.width-this.translation.x)/this.scale.x;this.layer.forEach(function(a){a.ctx.clearRect(f,d,g-f,e-d)}),c.layer.forEach(function(a){a.draw()})}else a.type==="circle"?this.circle(a,b):a.type==="line"?this.line(a,b):Array.isArray(a)&&a.forEach(function(a){c[a.type](a,b)})},this.circle=function(){y.circle.apply(f.layer.main,arguments)},this.line=function(){y.line.apply(f.layer.main,arguments)},this.path=function(){y.path.apply(f.layer.main,arguments)},this.pixel=function(){y.pixel.apply(f.layer.main,arguments)},this.text=function(){y.text.apply(f.layer.main,arguments)}):h.renderer==="SVG"&&(this.applyTransformation=z.applyTransformation,this.draw=function(a,b){typeof b=="undefined"&&(b={});var c=this;arguments.length===0?(this.layer.forEach(function(a){a.ctx.textContent=""}),c.layer.forEach(function(a){a.draw()})):a.type==="circle"?this.circle(a,b):a.type==="line"?this.line(a,b):Array.isArray(a)&&a.forEach(function(a){c[a.type](a,b)})},this.circle=function(){z.circle.apply(f.layer.main,arguments)},this.line=function(){z.line.apply(f.layer.main,arguments)},this.path=function(){z.path.apply(f.layer.main,arguments)},this.pixel=function(){z.pixel.apply(f.layer.main,arguments)},this.text=function(){z.text.apply(f.layer.main,arguments)}),this.draw()}return __extends(c,b),c.prototype.getEventPoint=function(b){var c,d;return b.offsetX?(c=b.offsetX,d=b.offsetY):(c=b.layerX,d=b.layerY),new a.Point([c,d,1])},c.prototype.getLineEndPoints=function(a){if(a.type==="line"){var b=-this.translation.y/this.scale.y,c=(this.height-this.translation.y)/this.scale.y,d=-this.translation.x/this.scale.x,e=(this.width-this.translation.x)/this.scale.x,f=-(a[2]+a[0]*e)/a[1],g=-(a[2]+a[1]*b)/a[0],h=-(a[2]+a[0]*d)/a[1],i=-(a[2]+a[1]*c)/a[0],j=[];return f<b&&f>c&&j.push([e,f]),h<b&&h>c&&j.push([d,h]),g<e&&g>d&&j.push([g,b]),i<e&&i>d&&j.push([i,c]),j}return a},c.prototype.onmousedown=function(a){if(a.button!==0)return;a.preventDefault&&a.preventDefault(),a.returnValue=!1,this.interaction.allowPan&&(this.interaction.type="pan",this.interaction.startPoint=this.getEventPoint(a),this.interaction.startTransformation=this.transformation.copy())},c.prototype.onmousemove=function(a){var b;a.preventDefault&&a.preventDefault(),a.returnValue=!1,this.interaction.type==="pan"&&(b=this.getEventPoint(a).minus(this.interaction.startPoint),this.translation.x=this.interaction.startTransformation[0][2]+b[0],this.translation.y=this.interaction.startTransformation[1][2]+b[1],this.draw())},c.prototype.onmouseup=function(a){a.preventDefault&&a.preventDefault(),a.returnValue=!1,this.interaction.type==="pan"&&(delete this.interaction.type,delete this.interaction.startPoint,delete this.interaction.startTransformation)},c.prototype.onmousewheel=function(b){var c,d,e,f;this.interaction.allowZoom&&(b.preventDefault&&b.preventDefault(),b.returnValue=!1,b.wheelDelta?c=b.wheelDelta/360:c=b.detail/-9,f=Math.pow(1+this.interaction.zoomSpeed,c),e=this.transformation.inverse().times(this.getEventPoint(b)),d=new a.Matrix([[f,0,e[0]-e[0]*f],[0,f,e[1]-e[1]*f],[0,0,1]]),this.transformation=this.transformation.times(d),this.applyTransformation(),this.draw())},c}(t);a.Screen2D=A;var B=function(a){function b(b,c){function u(){requestAnimationFrame(u),w(),v()}function v(){var a=l.getDelta();k.update()}function w(){j.render(h,i)}a.call(this,b,c);var d={anaglyphMode:!1,axis:!0,background:16777215,camera:{lookAt:[0,0,0],position:[10,10,10]},controls:"Trackball",height:500,renderer:"WebGL",width:500},g=e(d,c),h=new THREE.Scene,i,j,k,l=new THREE.Clock,m=45,n=g.width/g.height,o=.1,p=2e4;i=new THREE.PerspectiveCamera(m,n,o,p),i.position=f(g.camera.position),i.lookAt(f(g.camera.lookAt)),i.up=new THREE.Vector3(0,0,1),h.add(i),j=new THREE[g.renderer+"Renderer"]({antialias:!0,preserveDrawingBuffer:!0}),this.wrapper.appendChild(j.domElement);var q=j;g.anaglyphMode&&(j=new THREE.AnaglyphEffect(j)),j.setSize(g.width,g.height),g.controls?k=new THREE[g.controls+"Controls"](i,j.domElement):k={update:function(){}};var r=new THREE.PointLight(16777215);r.position.set(0,0,200),h.add(r);var s=new THREE.PointLight(16777215);s.position.set(0,0,-200),h.add(s),j.setClearColorHex(g.background,1),j.clear();if(g.axis){var t=new THREE.AxisHelper;h.add(t)}u(),this.scene=h}return __extends(b,a),b.prototype.parametricPlot3D=function(a,b){var c={closed:!1,debug:!1,min:0,max:1,pointNum:1e3,radius:.05,segmentsRadius:6,material:{type:"MeshLambert"}},d=e(c,b),f=THREE.Curve.create(function(){},function(b){b=(d.max-d.min)*b+d.min;var c=a(b);return new THREE.Vector3(c[0],c[1],c[2])}),g=new THREE.Mesh(new THREE.TubeGeometry(new f,d.pointNum,d.radius,d.segmentsRadius,d.closed,d.debug),new THREE[d.material.type+"Material"](d.material));return this.scene.add(g),this},b.prototype.plot3D=function(a,b){return this.surfacePlot3D(function(b,c){return[b,c,a(b,c)]},b)},b.prototype.surfacePlot3D=function(a,b){var c={material:{type:"MeshLambert"},pointNumX:100,pointNumY:100,xmin:0,xmax:1,ymin:0,ymax:1},d=e(c,b),f=function(b,c){b=(d.xmax-d.xmin)*b+d.xmin,c=(d.ymax-d.ymin)*c+d.ymin;var e=a(b,c);return new THREE.Vector3(e[0],e[1],e[2])},g=new THREE.Mesh(new THREE.ParametricGeometry(f,d.pointNumX,d.pointNumY,!1),new THREE[d.material.type+"Material"](d.material));return g.doubleSided=!0,this.scene.add(g),this},b}(t);a.Screen3D=B;var C=function(){function b(a){var b=this;this.type="vector",a.forEach(function(a,c){b[c]=a}),this.length=a.length}return b.areLinearIndependent=function(b){var c=b.length,d=b[0].length;return c>d?!1:b.every(function(a){return a.length==d})?(new a.Matrix(b)).rank()===c:undefined},b.prototype.every=function(a){return Array.prototype.every.call(this,a)},b.prototype.forEach=function(a){Array.prototype.forEach.call(this,a)},b.prototype.isEqual=function(b){return this.length!==b.length?!1:this.every(function(c,d){return a.isEqual(c,b[d])})},b.prototype.isZero=function(){return this.every(a.isZero)},b.prototype.map=function(a){return new this.constructor(Array.prototype.map.call(this,a))},b.prototype.minus=function(a){if(this.length===a.length)return this.plus(a.negative())},b.prototype.negative=function(){return this.map(a.negative)},b.prototype.norm=function(b){return typeof b=="undefined"&&(b=2),b===2?a.hypot.apply(null,this.toArray()):b===Infinity?Math.max.apply(null,this.map(Math.abs).toArray()):a.root(this.reduce(function(a,c){return a+Math.pow(Math.abs(c),b)},0),b)},b.prototype.outerProduct=function(b){return new a.Matrix(this.map(function(c){return b.map(function(b){return a.times(c,b)})}))},b.prototype.plus=function(b){if(this.length===b.length)return new a.Vector(this.map(function(c,d){return a.plus(c,b[d])}))},b.prototype.reduce=function(){var a=[];for(var b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return Array.prototype.reduce.apply(this,a)},b.prototype.scalarProduct=function(b){if(this.length===b.length)return this.reduce(function(c,d,e,f){return a.plus(c,a.times(f[e],b[e]))},0)},b.prototype.slice=function(){var a=[];for(var b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return Array.prototype.slice.apply(this,a)},b.prototype.times=function(b){var c=[],d,e;b.type==="rational"&&(b=b.toNumber());if(typeof b=="number"||b.type==="complex")return this.map(function(c){return a.times(b,c)});if(b.type==="matrix"){c=b.toColVectors();for(d=0,e=c.length;d<e;d++)c[d]=this.scalarProduct(c[d]);return new a.Vector(c)}},b.prototype.toArray=function(){return Array.prototype.slice.call(this)},b.prototype.toContentMathMLString=function(){return this.reduce(function(b,c){return b+a.toContentMathMLString(c)},"<vector>")+"</vector>"},b.prototype.toLaTeX=function(){return"\\begin{pmatrix}\n\t"+this.reduce(function(b,c){return b+"\\\\\n\t"+a.toLaTeX(c)})+"\n\\end{pmatrix}"},b.prototype.toMathMLString=function(){return this.reduce(function(b,c){return b+"<mtr><mtd>"+a.toMathMLString(c)+"</mtd></mtr>"},"<mrow><mo>(</mo><mtable>")+"</mtable><mo>)</mo></mrow>"},b.prototype.toString=function(){return"("+this.reduce(function(b,c){return b+", "+a.toString(c)})+")"},b.prototype.vectorProduct=function(b){if(this.length===3&&b.length===3)return new a.Vector([a.minus(a.times(this[1],b[2]),a.times(this[2],b[1])),a.minus(a.times(this[2],b[0]),a.times(this[0],b[2])),a.minus(a.times(this[0],b[1]),a.times(this[1],b[0]))])},b.zero=function(b){var c=[],d;for(d=0;d<b;d++)c.push(0);return new a.Vector(c)},b}();a.Vector=C;var D=function(){function b(b,c){this.type="circle",b.type===undefined&&(b=new a.Point(b.concat(1))),this.center=b,this.radius=c}return b.prototype.area=function(){return this.radius*this.radius*Math.PI},b.prototype.circumference=function(){return 2*this.radius*Math.PI},b.prototype.draw=function(a,b){if(Array.isArray(a)){var c=this;a.forEach(function(a){a.circle(c,b)})}else a.circle(this,b);return this},b.prototype.isEqual=function(b){return a.isEqual(this.radius,b.radius)&&this.center.isEqual(b.center)},b.prototype.positionOf=function(b){var c;if(b.type==="point"&&b.dim===2)return c=b.distanceTo(this.center)-this.radius,a.isZero(c)?"on":c<0?"in":"out"},b.prototype.reflectAt=function(b){return new a.Circle(this.center.reflectAt(b),this.radius)},b.prototype.toLaTeX=function(){return"B_{"+a.toLaTeX(this.radius)+"}\\left("+this.center.toLaTeX()+"\\right)"},b.prototype.toMatrix=function(){var b=this.center[0]/this.center[2],c=this.center[1]/this.center[2],d=this.radius;return new a.Matrix([[1,0,-b],[0,1,-c],[-b,-c,b*b+c*c-d*d]])},b}();a.Circle=D;var E=function(){function b(a,b){this.type="complex",this.re=a,this.im=b}return b.prototype.abs=function(){return a.hypot(this.re,this.im)},b.prototype.arccos=function(){return a.minus(Math.PI/2,this.arcsin())},b.prototype.arccot=function(){return a.minus(Math.PI/2,this.arctan())},b.prototype.arccsc=function(){return a.times(new a.Complex(0,1),a.ln(a.plus(a.sqrt(a.minus(1,a.divide(1,a.times(this,this)))),a.divide(new a.Complex(0,1),this))))},b.prototype.arcsin=function(){var b=this.re,c=this.im;return new a.Complex(a.sign(b)/2*a.arccos(Math.sqrt(Math.pow(b*b+c*c-1,2)+4*c*c)-(b*b+c*c)),a.sign(c)/2*a.arcosh(Math.sqrt(Math.pow(b*b+c*c-1,2)+4*c*c)+(b*b+c*c)))},b.prototype.arctan=function(){var b=new a.Complex(-this.im,this.re);return a.times(new a.Complex(0,.5),a.ln(a.divide(a.plus(1,b),a.minus(1,b))))},b.prototype.arg=function(){return Math.atan2(this.im,this.re)},b.prototype.artanh=function(){return a.times(.5,a.minus(a.ln(a.plus(1,this)),a.ln(a.minus(1,this))))},b.prototype.compare=function(b){var c=a.sign(this.abs()-b.abs());return c?c:a.sign(this.arg()-b.arg())},b.prototype.conjugate=function(){return new a.Complex(this.re,a.negative(this.im))},b.prototype.copy=function(){return new a.Complex(a.copy(this.re),a.copy(this.im))},b.prototype.cos=function(){return new a.Complex(a.cos(this.re)*a.cosh(this.im),-a.sin(this.re)*a.sinh(this.im))},b.prototype.cosh=function(){return new a.Complex(a.cos(this.im)*a.cosh(this.re),a.sin(this.im)*a.sinh(this.re))},b.prototype.divide=function(b){return this.times(a.inverse(b))},b.prototype.exp=function(){return new a.Complex(a.exp(this.re)*a.cos(this.im),a.exp(this.re)*a.sin(this.im))},b.prototype.inverse=function(){return new a.Complex(a.divide(this.re,a.plus(a.pow(this.re,2),a.pow(this.im,2))),a.divide(a.negative(this.im),a.plus(a.pow(this.re,2),a.pow(this.im,2))))},b.prototype.isEqual=function(b){return typeof b=="number"?a.isEqual(this.re,b)&&a.isZero(this.im):b.type==="complex"?a.isEqual(this.re,b.re)&&a.isEqual(this.im,b.im):!1},b.prototype.isFinite=function(){return a.isFinite(this.re)&&a.isFinite(this.im)},b.prototype.isOne=function(){return a.isOne(this.re)&&a.isZero(this.im)},b.prototype.isReal=function(){return a.isZero(this.im)},b.prototype.isZero=function(){return a.isZero(this.re)&&a.isZero(this.im)},b.prototype.ln=function(){return new a.Complex(a.ln(this.abs()),this.arg())},b.prototype.minus=function(b){return this.plus(a.negative(b))},b.prototype.mod=function(b){return new a.Complex(a.mod(this.re,b),a.mod(this.im,b))},b.prototype.negative=function(){return new a.Complex(a.negative(this.re),a.negative(this.im))},b.one=new b(1,0),b.prototype.plus=function(b){if(b.type==="complex")return new a.Complex(a.plus(this.re,b.re),a.plus(this.im,b.im));b.type==="rational"&&(b=b.toNumber());if(typeof b=="number")return new a.Complex(a.plus(this.re,b),this.im)},b.polar=function(b,c){return new a.Complex(b*Math.cos(c),b*Math.sin(c))},b.prototype.pow=function(b){return new a.Complex(Math.pow(this.abs(),b),b*this.arg())},b.prototype.sign=function(){return a.Complex.polar(1,this.arg())},b.prototype.sin=function(){return new a.Complex(a.sin(this.re)*a.cosh(this.im),a.cos(this.re)*a.sinh(this.im))},b.prototype.sinh=function(){return new a.Complex(a.cos(this.im)*a.sinh(this.re),a.sin(this.im)*a.cosh(this.re))},b.prototype.times=function(b){if(b.type==="complex")return new a.Complex(a.minus(a.times(this.re,b.re),a.times(this.im,b.im)),a.plus(a.times(this.re,b.im),a.times(this.im,b.re)));b.type==="rational"&&(b=b.toNumber());if(typeof b=="number")return new a.Complex(a.times(this.re,b),a.times(this.im,b))},b.prototype.toContentMathMLString=function(){return'<cn type="complex-cartesian">'+this.re+"<sep/>"+this.im+"</cn>"},b.prototype.toLaTeX=function(){var b="",c=!1;return a.isZero(this.re)||(b=a.toLaTeX(this.re),c=!0),a.isZero(this.im)||(b+=a.toLaTeX(this.im,c)+"i"),b.length===0&&(b="0"),b},b.prototype.toMathMLString=function(){var b="",c=!1;return a.isZero(this.re)||(b=a.toMathMLString(this.re),c=!0),a.isZero(this.im)||(b+=a.toMathMLString(this.im,c)+"<mo>&#x2062;</mo><mi>i</mi>"),b.length===0&&(b="<mn>0</mn>"),b},b.prototype.toMatrix=function(){return new a.Matrix([[this.re,a.negative(this.im)],[this.im,this.re]])},b.prototype.toPoint=function(){return new a.Point(this.re,this.im)},b.prototype.toString=function(){var b="";return a.isZero(this.re)||(b=a.toString(this.re)),a.isZero(this.im)||(b+=(this.im>0?b.length?"+":"":"-")+a.toString(Math.abs(this.im))+"i"),b.length===0&&(b="0"),b},b.zero=new b(0,0),b}();a.Complex=E;var F=function(b){function c(a){b.call(this,a),this.type="line",this.dim=2}return __extends(c,b),c.prototype.draw=function(a,b){if(Array.isArray(a)){var c=this;a.forEach(function(a){a.line(c,b)})}else a.line(this,b);return this},c.prototype.isEqual=function(b){var c=this.normalize();return b=b.normalize(),this.length!==b.length?!1:c.every(function(c,d){return a.isEqual(c,b[d])})},c.prototype.isFinite=function(){return!a.isZero(this[this.length-1])},c.prototype.isOrthogonalTo=function(b){return a.isEqual((new a.Point([0,0,1])).crossRatio(this.meet(new a.Line([0,0,1])),b.meet(new a.Line([0,0,1])),a.Point.I,a.Point.J),-1)},c.prototype.isParallelTo=function(b){return this.every(function(c,d){return a.isEqual(c,b[d])||d===b.length-1})},c.prototype.meet=function(b){return new a.Point([this[1]*b[2]-this[2]*b[1],b[0]*this[2]-this[0]*b[2],this[0]*b[1]-this[1]*b[0]])},c.prototype.normalize=function(){var a=this[this.dim];return this.map(function(b){return b/a})},c}(C);a.Line=F;var G=function(){function b(b){var c=this;this.type="matrix";if(typeof b=="string"){if(b.indexOf("<")>-1)return(new a.MathML(b)).parse();b=b.trim().replace(/;?\n/g,"],["),b=JSON.parse("[["+b+"]]")}b.forEach(function(a,b){c[b]=a}),this.length=b.length,this.cols=b[0].length,this.rows=b.length}return b.prototype.adjoint=function(){return this.map(a.conjugate).transpose()},b.prototype.adjugate=function(){return this.map(function(b,c,d,e){return a.times(e.remove(d,c).determinant(),1-(c+d)%2*2)})},b.prototype.cholesky=function(){var b,c,d=[],e,f,g,h,i;for(b=0,c=this.rows;b<c;b++)d.push([]);for(b=0,c=this.rows;b<c;b++){for(h=0;h<b;h++){g=0;for(e=0,f=h;e<f;e++)g=a.plus(g,a.times(d[b][e],d[h][e]));d[b][h]=(this[b][h]-g)/d[h][h]}g=0;for(e=0,f=h;e<f;e++)g=a.plus(g,a.times(d[b][e],d[b][e]));d[b][h]=Math.sqrt(this[h][h]-g);for(h++;h<this.cols;h++)d[b][h]=0}return i=new a.Matrix(d),this.cholesky=function(){return i},i},b.prototype.copy=function(){return this.map(a.copy)},b.prototype.determinant=function(){if(this.isSquare()){var b,c;return this.rank()<this.rows?c=0:(b=this.LU(),c=a.times(this.LUpermutation.sgn(),a.times.apply(null,b.diag()))),this.determinant=function(){return c},c}},b.prototype.diag=function(){var a=[],b,c;for(b=0,c=Math.min(this.rows,this.cols);b<c;b++)a.push(this[b][b]);return a},b.prototype.divide=function(b){return this.times(a.inverse(b))},b.prototype.every=function(a){return Array.prototype.every.call(this,function(b,c){return Array.prototype.every.call(b,function(b,d){return a(b,c,d,this)})})},b.prototype.forEach=function(a){Array.prototype.forEach.call(this,function(b,c){return Array.prototype.forEach.call(b,function(b,d){return a(b,c,d,this)})})},b.prototype.gershgorin=function(){var b=[],c=[],d=[],e=[],f,g;for(f=0,g=this.rows;f<g;f++)c.push(0),d.push(0);this.forEach(function(e,f,g){f===g?a.is(e,"complex")?b.push(e.toPoint()):b.push(new a.Point([e,0,1])):(c[g]+=a.abs(e),d[f]+=a.abs(e))});for(f=0,g=this.rows;f<g;f++)e.push(new a.Circle(b[f],Math.min(c[f],d[f])));return e},b.prototype.givens=function(){var b=this.rows,c=this.cols,d=this.copy(),e=a.Matrix.identity(b),f,g,h,i,j,k,l,m,n,o;for(i=0;i<c;i++)for(j=i+1;j<b;j++)if(!a.isZero(d[j][i])){h=(d[i][i]<0?-1:1)*a.hypot(d[i][i],d[j][i]),f=d[i][i]/h,g=d[j][i]/h,l=[],m=[],n=[],o=[];for(k=0;k<c;k++)l.push(d[i][k]),m.push(d[j][k]);for(k=0;k<c;k++)d[i][k]=m[k]*g+l[k]*f,d[j][k]=m[k]*f-l[k]*g;for(k=0;k<b;k++)n.push(e[k][i]),o.push(e[k][j]);for(k=0;k<b;k++)e[k][i]=n[k]*f+o[k]*g,e[k][j]=-n[k]*g+o[k]*f}return[e,d]},b.givensMatrix=function(b,c,d,e){var f=a.Matrix.identity(b);return f[d][d]=f[c][c]=Math.cos(e),f[c][d]=Math.sin(e),f[d][c]=-f[c][d],f},b.identity=function(b){var c=[],d=[],e,f;b=b||1;for(e=0,f=b-1;e<f;e++)c.push(0);c.push(1),c=c.concat(c),c=c.slice(0,-1);for(e=0,f=b;e<f;e++)d.push(c.slice(b-e-1,2*b-e-1));return new a.Matrix(d)},b.prototype.inverse=function(){if(!this.isSquare()&&this.determinant())return;return this.adjugate().divide(this.determinant())},b.prototype.isBandMatrix=function(b,c){var d,e,f,g;return arguments.length===1&&(c=b),this.every(function(d,e,f){return e-b<=f&&e+c>=f||a.isZero(d)})},b.prototype.isDiag=function(){var a,b,c,d;if((this.hasOwnProperty("isUpper")&&this.isUpper())+ +(this.hasOwnProperty("isLower")&&this.isLower())+ +(this.hasOwnProperty("isSymmetric")&&this.isSymmetric())>1)return!0;for(a=0,c=this.rows;a<c;a++)for(b=0,d=this.cols;b<d;b++)if(a!==b&&this[a][b]!==0)return!1;return!0},b.prototype.isEqual=function(b){var c,d,e,f;if(this===b)return!0;if(this.rows===b.rows&&this.cols===b.cols){for(c=0,e=this.rows;c<e;c++)for(d=0,f=this.cols;d<f;d++)if(!a.isEqual(this[c][d],b[c][d]))return!1;return!0}return!1},b.prototype.isIdentity=function(){if(!this.isSquare())return!1;var b=this.every(function(b,c,d){return c===d?a.isOne(b):a.isZero(b)});return this.isIdentity=function(){return b},b},b.prototype.isInvertible=function(){return this.isSquare()&&this.rank()===this.rows},b.prototype.isLower=function(){return this.slice(0,-1).every(function(b,c){return b.slice(c+1).every(a.isZero)})},b.prototype.isNegDefinite=function(){if(!this.isSquare())return;return this.rows===1?this[0][0]<0:this.rows%2===0?this.determinant()>0&&this.remove(this.rows-1,this.cols-1).isNegDefinite():this.determinant()<0&&this.remove(this.rows-1,this.cols-1).isNegDefinite()},b.prototype.isOrthogonal=function(){return this.transpose().times(this).isIdentity()},b.prototype.isPermutation=function(){var b=[],c=[];return this.every(function(d,e,f){return a.isOne(d)?b[e]||c[f]?!1:(b[e]=!0,c[f]=!0,!0):a.isZero(d)?!0:!1})&&b.length===this.rows&&c.length===this.cols},b.prototype.isPosDefinite=function(){if(!this.isSquare())return;return this.rows===1?this[0][0]>0:this.determinant()>0&&this.remove(this.rows-1,this.cols-1).isPosDefinite()},b.prototype.isReal=function(){return this.every(a.isReal)},b.prototype.isScalar=function(){var b=this.rows,c=this.diag,d;if(this.hasOwnProperty("isIdentity")&&this.hasOwnProperty("isZero"))return this.isIdentity()||this.isZero()?!0:!1;if(this.isDiag()){for(d=1;d<b;d++)if(!a.isEqual(c[0],c[d]))return!1;return!0}return!1},b.prototype.isSquare=function(){return this.cols===this.rows},b.prototype.isSymmetric=function(){var b,c,d=!0;if(!this.isSquare())d=!1;else e:for(b=0;b<this.rows;b++)for(c=b+1;c<this.cols;c++)if(!a.isEqual(this[b][c],this[c][b])){d=!1;break e}return this.isSymmetric=function(){return d},d},b.prototype.isUpper=function(){return this.slice(1).every(function(b,c){return b.slice(0,c+1).every(a.isZero)})},b.prototype.isVector=function(){return this.rows===1||this.cols===1},b.prototype.isZero=function(){var b=this.every(a.isZero);return this.isZero=function(){return b},b},b.prototype.LU=function(b){var c,d,e,f,g,h=this.toArray(),i=this.rows,j=this.cols,k=[];for(e=0;e<j;e++){if(!b){g=e;for(c=e+1;c<i;c++)Math.abs(h[c][e])>Math.abs(h[g][e])&&(g=c);g!==e&&(k.unshift([g,e]),f=h[g],h[g]=h[e],h[e]=f)}if(h[e][e]!==0)for(c=e+1;c<i;c++){h[c][e]=a.divide(h[c][e],h[e][e]);for(d=e+1;d<j;d++)h[c][d]=a.minus(h[c][d],a.times(h[c][e],h[e][d]))}}return h=new a.Matrix(h),this.LU=function(){return h},this.LUpermutation=new a.Permutation(k),h},b.prototype.map=function(b){var c=this;return new a.Matrix(Array.prototype.map.call(this,function(a,d){return Array.prototype.map.call(a,function(a,e){return b(a,d,e,c)})}))},b.prototype.minor=function(a,b){return this.remove(a,b).determinant()},b.prototype.minus=function(a){return this.plus(a.negative())},b.prototype.negative=function(){var b=[],c,d;for(c=0,d=this.rows;c<d;c++)b.push(this[c].map(a.negative));return new a.Matrix(b)},b.numbers=function(b,c,d){var e=[],f=[],g,h;for(g=0,h=d||c||1;g<h;g++)e.push(b);for(g=0,h=c||1;g<h;g++)f.push(e.slice(0));return new a.Matrix(f)},b.one=function(b,c){return b=b||1,c=c||1,a.Matrix.numbers(1,b,c)},b.prototype.plus=function(b){var c=[],d=this.rows,e=this.cols,f,g;for(f=0;f<d;f++){c[f]=[];for(g=0;g<e;g++)c[f][g]=a.plus(this[f][g],b[f][g])}return new a.Matrix(c)},b.random=function(b,c){var d,e=[],f,g,h,i;for(f=0,h=b||1;f<h;f++){d=[];for(g=0,i=c||b||1;g<i;g++)d.push(Math.random());e.push(d)}return new a.Matrix(e)},b.prototype.rank=function(){var b=0,c,d,e,f;c=this.rref();g:for(d=Math.min(this.rows,this.cols)-1;d>=0;d--)for(f=this.cols-1;f>=d;f--)if(!a.isZero(c[d][f])){b=d+1;break g}return this.rank=function(){return b},b},b.prototype.reduce=function(){var a=[];for(var b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return Array.prototype.reduce.apply(this,a)},b.prototype.remove=function(b,c){var d=this.toArray();if(b||b===0)typeof b=="number"&&(b=[b]),d=d.filter(function(a,c,d){return b.indexOf(c)===-1});if(c||c===0)typeof c=="number"&&(c=[c]),c=c.sort().reverse(),c.forEach(function(a){d=d.map(function(b){return b.splice(a,1),b})});return new a.Matrix(d)},b.prototype.rref=function(){var b=0,c=this.toArray(),d,e,f,g,h;for(f=0;f<this.rows;f++){if(this.cols<=b)return new a.Matrix(c);d=f;while(c[d][b]===0){d++;if(this.rows===d){d=f,b++;if(this.cols===b)return new a.Matrix(c)}}var i=c[d];c[d]=c[f],c[f]=i,h=c[f][b];for(e=0;e<this.cols;e++)c[f][e]/=h;for(d=0;d<this.rows;d++){if(d===f)continue;h=c[d][b];for(e=0;e<this.cols;e++)c[d][e]=a.minus(c[d][e],a.times(h,c[f][e]))}b++}return new a.Matrix(c)},b.prototype.slice=function(){var a=[];for(var b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return Array.prototype.slice.apply(this,a)},b.prototype.solve=function(b){var c=this.LU(),d,e,f=b.length,g=[],h=[];b=this.LUpermutation.applyTo(b);for(d=0;d<f;d++){h[d]=b[d];for(e=0;e<d;e++)h[d]=a.minus(h[d],a.times(c[d][e],h[e]))}for(d=f-1;d>=0;d--){g[d]=h[d];for(e=d+1;e<f;e++)g[d]=a.minus(g[d],a.times(c[d][e],g[e]));g[d]=a.divide(g[d],c[d][d])}return new b.constructor(g)},b.prototype.some=function(a){return Array.prototype.some.call(this,function(b,c){return Array.prototype.some.call(b,function(b,d){return a(b,c,d,this)})})},b.prototype.times=function(b){var c=[],d,e,f,g;b.type==="rational"&&(b=b.toNumber());if(typeof b=="number"||b.type==="complex")return this.map(function(c){return a.times(c,b)});if(b.type==="matrix"){if(this.cols===b.rows){for(e=0;e<this.rows;e++){c[e]=[];for(f=0;f<b.cols;f++){d=0;for(g=0;g<this.cols;g++)d=a.plus(d,a.times(this[e][g],b[g][f]));c[e][f]=d}}return new a.Matrix(c)}}else if(b.type==="point"||b.type==="vector")if(this.cols===b.length){for(f=0;f<this.rows;f++){d=0;for(g=0;g<this.cols;g++)d=a.plus(d,a.times(this[f][g],b[g]));c.push(d)}return new b.constructor(c)}},b.prototype.toArray=function(){return Array.prototype.map.call(this,function(b){return Array.prototype.map.call(b,function(b){return a.copy(b)})})},b.prototype.toColVectors=function(){return this.transpose().toRowVectors()},b.prototype.toComplex=function(){if(this.rows!==2||this.cols!==2||this[0][0]!==this[1][1]||this[0][1]!==a.negative(this[1][0]))return;return new a.Complex(this[0][0],this[1][0])},b.prototype.toContentMathMLString=function(){return this.reduce(function(b,c){return b+c.reduce(function(b,c){return b+a.toContentMathMLString(c)},"<matrixrow>")+"</matrixrow>"},"<matrix>")+"</matrix>"},b.prototype.toLaTeX=function(){return"\\begin{pmatrix}\n"+this.reduce(function(b,c){return b+c.reduce(function(b,c){return b+" & "+a.toLaTeX(c)})+"\\\n"},"").slice(0,-2)+"\n\\end{pmatrix}"},b.prototype.toMathMLString=function(){return this.reduce(function(b,c){return b+c.reduce(function(b,c){return b+"<mtd>"+a.toMathMLString(c)+"</mtd>"},"<mtr>")+"</mtr>"},"<mrow><mo> ( </mo><mtable>")+"</mtable><mo> ) </mo></mrow>"},b.prototype.toRowVectors=function(){return this.toArray().map(function(b){return new a.Vector(b)})},b.prototype.toString=function(){return this.reduce(function(b,c){return b+c.reduce(function(b,c){return b+"\t"+a.toString(c)})+"\n"},"").slice(0,-1)},b.prototype.trace=function(){var b=a.plus.apply(null,this.diag());return this.trace=function(){return b},b},b.prototype.transpose=function(){var b=[],c,d,e,f,g,h;for(e=0,g=this.cols;e<g;e++){d=[];for(f=0,h=this.rows;f<h;f++)d.push(this[f][e]);b.push(d)}return c=new a.Matrix(b),this.transpose=function(){return c},c},b.zero=function(b,c){return b=b||1,c=c||1,a.Matrix.numbers(0,b,c)},b}();a.Matrix=G;var H=function(){function b(a){var c=this;this.type="permutation";var d,e;Array.isArray(a[0])?(d=a,e=b.cycleToList(d)):(e=a,d=b.listToCycle(e)),e.forEach(function(a,b){c[b]=a}),this.length=e.length,this.cycle=d}return b.prototype.applyTo=function(a){var b,c;return typeof a=="number"?a>=this.length?a:this[a]:(b=this,c=a.map(function(c,d){return a[b.applyTo(d)]}),a.type===undefined?c:new a.constructor(c))},b.cycleToList=function c(a){var b,c=[],d,e,f,g,h,i;i=a.map(function(a){return Math.max.apply(null,a)}),i=Math.max.apply(null,i);for(e=0,f=i;e<=f;e++){d=e;for(g=0,h=a.length;g<h;g++)b=a[g].indexOf(d),++b&&(d=a[g][b%a[g].length]);c.push(d)}return c},b.id=new b([[]]),b.prototype.inverse=function(){var b=this.cycle.slice(0);return b.reverse().forEach(function(a){a.reverse()}),new a.Permutation(b)},b.listToCycle=function d(a){var b=[],c,d,e,f,g=[];for(d=0,e=a.length;d<e;d++){c=d,f=[];while(!b[c])b[c]=!0,f.push(c),c=a[c];f.length&&g.push(f)}return g},b.prototype.map=function(){var a=[];for(var b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return new this.constructor(Array.prototype.map.apply(this,a))},b.prototype.sgn=function(){var a=0,b;for(b=0;b<this.cycle.length;b++)a+=this.cycle[b].length;return a+=this.cycle.length,-2*(a%2)+1},b.prototype.times=function(a){var b=this;return a.map(function(a){return b[a]})},b.prototype.toMatrix=function(b){var c=[],d=[],e,f,g;b=b||this.length;for(f=0,g=b-1;f<g;f++)c.push(0);c=c.concat([1]).concat(c);for(f=0,g=b;f<g;f++)e=b-this.applyTo(f)-1,d.push(c.slice(e,e+b));return new a.Matrix(d)},b.prototype.toString=function(){var a="";return this.cycle.forEach(function(b){a+="("+b.toString()+")"}),a},b}();a.Permutation=H;var I=function(b){function c(a){b.call(this,arguments.length>1?Array.prototype.slice.call(arguments).concat(1):a),this.dim=2,this.type="point"}return __extends(c,b),c.prototype.crossRatio=function(b,c,d,e){var f=this.toArray(),g=b.toArray(),h=c.toArray(),i=d.toArray(),j=e.toArray(),k=new a.Matrix([f,g,i]),l=new a.Matrix([f,h,j]),m=new a.Matrix([f,g,j]),n=new a.Matrix([f,h,i]);return k.det()*l.det()/(m.det()*n.det())},c.prototype.distanceTo=function(a){var b=0,c;if(arguments.length===0){for(c=0;c<this.dim;c++)b+=Math.pow(this[c],2);return Math.sqrt(b)}if(a.type==="point"&&this.dim===a.dim)for(c=0;c<this.dim;c++)b+=Math.pow(this[c]-a[c],2);return Math.sqrt(b)},c.prototype.draw=function(a,b){if(Array.isArray(a)){var c=this;a.forEach(function(a){a.point(c,b)})}else a.point(this,b);return this},c.I=new c([new a.Complex(0,-1),0,1]),c.prototype.isEqual=function(b){var c=this.normalize();return b=b.normalize(),this.length!==b.length?!1:c.every(function(c,d){return a.isEqual(c,b[d])})},c.prototype.isFinite=function(){return!a.isZero(this[this.length-1])},c.prototype.isInside=function(a){if(a.type==="circle")return this.distanceTo(a.center)<a.radius},c.prototype.isOn=function(a){if(a.type==="line")return this.distanceTo(a.center)===a.radius;if(a.type==="circle")return this.distanceTo(a.center)===a.radius},c.prototype.isOutside=function(a){if(a.type==="circle")return this.distanceTo(a.center)>a.radius},c.J=new c([new a.Complex(0,1),0,1]),c.prototype.lineTo=function(b){if(this.dim===2&&b.dim===2)return new a.Line(this,b)},c.prototype.normalize=function(){var a=this[this.dim];return this.map(function(b){return b/a})},c.prototype.reflectAt=function(b){if(b.type==="point"&&this.dim===b.dim){var c=[],d,e=this.normalize();b=b.normalize();for(d=0;d<this.dim;d++)c.push(2*b[d]-e[d]);return c.push(1),new a.Point(c)}},c.prototype.toArray=function(){var a=[],b,c;for(b=0,c=this.dim;b<=c;b++)a.push(this[b]);return a},c.prototype.toComplex=function(){if(this.dim===2)return new a.Complex(this[0]/this[2],this[1]/this[2])},c.prototype.toLaTeX=function(b){typeof b=="undefined"&&(b=!1);var c=b?this.toArray():this.normalize().slice(0,-1);return"\\begin{pmatrix}"+c.reduce(function(b,c){return b+"\\\\"+a.toLaTeX(c)})+"\\end{pmatrix}"},c.prototype.toMathMLString=function(b){typeof b=="undefined"&&(b=!1);var c=b?this.toArray():this.normalize().slice(0,-1);return c.reduce(function(b,c){return b+"<mtr><mtd>"+a.toMathMLString(c)+"</mtd></mtr>"},"<mrow><mo>(</mo><mtable>")+"</mtable><mo>)</mo></mrow>"},c.prototype.toString=function(b){typeof b=="undefined"&&(b=!1);var c=b?this.toArray():this.normalize().slice(0,-1);return"("+c.reduce(function(b,c){return b+", "+a.toString(c)})+")"},c}(C);a.Point=I;var J=function(){function b(b){var c=this;this.type="polynomial";var d=[];if(b===undefined||b.length===0)b=[0];else if(typeof b=="number"){while(b--)d.push(0);d.push(1),b=d}b.forEach(function(a,b){c[b]=a}),this.length=b.length,this.deg=b.length-1,this.subdeg=function(b){var c=0;if(b.length>1||b[0]){while(c<b.length&&a.isZero(b[c]))c++;return c}return Infinity}(b)}return b.prototype.content=function(){return a.gcd(this)},b.prototype.differentiate=function(b){typeof b=="undefined"&&(b=1);var c=[],d;if(b===0)return this;if(b<0)return this.integrate(-b);for(d=0;d<=this.deg-b;d++)c[d]=a.times(this[d+b],a.fallingFactorial(d+b,b));return new a.Polynomial(c)},b.prototype.draw=function(a,b){var c=[],d,e=this;if(this.deg<2)Array.isArray(a)?a.forEach(function(a){a.line([[-50,e.valueAt(-50)],[50,e.valueAt(50)]],b)}):a.line([[-50,this.valueAt(-50)],[50,this.valueAt(50)]],b);else{for(d=-50;d<=50;d=Math.round((d+.01)*100)/100)c.push([d,this.valueAt(d)]);Array.isArray(a)?a.forEach(function(a){a.path(c,b)}):a.path(c,b)}return this},b.prototype.every=function(a){return Array.prototype.every.call(this,a)},b.prototype.forEach=function(){return Array.prototype.forEach.apply(this,arguments)},b.prototype.integrate=function(b){typeof b=="undefined"&&(b=1);var c=[],d;if(a.isZero(b))return this;if(b<0)return this.differentiate(-b);for(d=0;d<b;d++)c.push(0);for(d=0;d<=this.deg;d++)c[d+b]=this[d]/a.fallingFactorial(d+b,b);return new a.Polynomial(c)},b.prototype.interpolation=function(b,c){var d,e=new a.Polynomial([0]),f=b.length,g,h,i,j;arguments.length===2&&(b=b.map(function(a,b){return[a,c[b]]}));for(g=0;g<f;g++){d=new a.Polynomial([1]);for(h=0;h<f;h++)g!==h&&(d=d.times(new a.Polynomial([-b[h][0]/(b[g][0]-b[h][0]),1/(b[g][0]-b[h][0])])));e=e.plus(d.times(b[g][1]))}return e},b.prototype.isEqual=function(b){var c,d;if(this.deg!==b.deg||this.subdeg!==b.subdeg)return!1;for(c=0,d=this.deg;c<=d;c++)if(!a.isEqual(this[c],b[c]))return!1;return!0},b.prototype.isPrimitive=function(){return a.gcd(this)===1},b.prototype.isReal=function(){return this.every(a.isReal)},b.prototype.map=function(b){return new a.Polynomial(Array.prototype.map.call(this,b))},b.prototype.mod=function(b){return this.map(function(c){return a.mod(c,b)})},b.prototype.negative=function(){return new a.Polynomial(this.map(a.negative))},b.one=new b([1]),b.prototype.plus=function(b,c){var d=[],e;if(typeof b=="number"){if(c)return this.map(function(c){return a.plus(b,c)});d=this.slice(),d[0]=a.plus(d[0],b)}else if(b.type==="polynomial"){for(e=0;e<=Math.min(this.deg,b.deg);e++)d[e]=a.plus(this[e],b[e]);d=d.concat((this.deg>b.deg?this:b).slice(e))}return new a.Polynomial(d)},b.regression=function c(b,c){var d=b.length,e=0,f=0,g=0,h=0,i,j,k;if(arguments.length===2)for(k=0;k<d;k++)e+=b[k]*c[k],f+=b[k],g+=c[k],h+=b[k]*b[k];else for(k=0;k<d;k++)e+=b[k][0]*b[k][1],f+=b[k][0],g+=b[k][1],h+=b[k][0]*b[k][0];return i=(d*e-f*g)/(d*h-f*f),j=(g*h-e*f)/(d*h-f*f),new a.Polynomial([j,i])},b.roots=function d(d){var b,c=[],e,f;a.type(d)==="array"&&(d=a.set(d,!0)),b=d.powerset();for(e=0,f=d.card;e<f;e++)c[e]=0;return b.slice(1).forEach(function(b,d){c[f-b.card]=a.plus(c[f-b.card],b.times())}),c=c.map(function(b,c){return(f-c)%2?a.negative(b):b}),c.push(1),new a.Polynomial(c)},b.prototype.slice=function(){var a=[];for(var b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return Array.prototype.slice.apply(this,a)},b.prototype.tangent=function(b){var c=this.valueAt(b),d=this.differentiate().valueAt(b);return new a.Polynomial([c-d*b,d])},b.prototype.times=function(b){var c=[],d,e;b.type==="rational"&&(b=b.toNumber());if(b.type==="polynomial")for(d=0;d<=this.deg;d++)for(e=0;e<=b.deg;e++)c[d+e]=a.plus(c[d+e]?c[d+e]:0,a.times(this[d],b[e]));else c=this.map(function(c){return a.times(b,c)});return new a.Polynomial(c)},b.prototype.toContentMathMLString=function(b){var c="<apply><plus/>",d;for(d=this.deg;d>=0;d--)a.isZero(this[d])||(d===0?c+=a.toContentMathMLString(this[d]):c+="<apply><times/>"+a.toContentMathMLString(this[d],!0),d>1?c+="<apply><power/><ci>x</ci>"+a.toContentMathMLString(d)+"</apply></apply>":d===1&&(c+="<ci>x</ci></apply>"));return c+="</apply>",b&&(c='<math xmlns="http://www.w3.org/1998/Math/MathML"><lambda><bvar><ci>x</ci></bvar><domainofapplication><complexes/></domainofapplication>'+c+"</lambda></math>"),c},b.prototype.toFunctn=function(){var b="",c,d;for(c=0,d=this.deg;c<=d;c++)a.isZero(this[c])||(c===0?b+=a.toString(this[c]):b+=a.toString(this[c],!0),c>1?b+="* Math.pow(x,"+a.toString(c)+")":c===1&&(b+="*x"));return new a.Functn(new Function("x","return "+b),{contentMathMLString:this.toContentMathMLString(!0)})},b.prototype.toLaTeX=function(){var b=a.toString(this[this.deg])+"*x^{"+this.deg+"}",c;for(c=this.deg-1;c>=0;c--)a.isZero(this[c])||(b+=a.toLaTeX(this[c],!0),c>1?b+="x^{"+a.toLaTeX(c)+"}":c===1&&(b+="x"));return b},b.prototype.toMathMLString=function(b){var c="<mrow>"+a.toMathMLString(this[this.deg],!0)+"<mo>&#x2062;</mo><msup><mi>x</mi>"+a.toMathMLString(this.deg)+"</msup>",d;for(d=this.deg-1;d>=0;d--)a.isZero(this[d])||(c+=a.toMathMLString(this[d],!0),d>1?c+="<mo>&#x2062;</mo><msup><mi>x</mi>"+a.toMathMLString(d)+"</msup>":d===1&&(c+="<mo>&#x2062;</mo><mi>x</mi>"));return c+="</mrow>",b&&(c='<math xmlns="http://www.w3.org/1998/Math/MathML">'+c+"</math>"),c},b.prototype.toString=function(b){var c=a.toString(this[this.deg])+"*x^"+this.deg,d;for(d=this.deg-1;d>=0;d--)a.isZero(this[d])||(c+=a.toString(this[d],!0),d>1?c+="*x^"+a.toString(d):d===1&&(c+="*x"));return c},b.prototype.valueAt=function(b){var c=a.is(b,"matrix")?a.Matrix.identity(b.rows,b.cols):1,d=a.is(b,"matrix")?a.Matrix.zero(b.rows,b.cols):0,e,f;for(e=0,f=this.deg;e<=f;e++)d=a.plus(d,a.times(this[e],c)),c=a.times(c,b);return d},b.zero=new b([0]),b}();a.Polynomial=J;var K=function(){function b(b,c){typeof c=="undefined"&&(c=1),this.type="rational";if(a.isZero(c))throw"The denominator cannot be zero.";this.numerator=b,this.denominator=c}return b.prototype.divide=function(b){return b.type==="rational"?new a.Rational(a.times(this.numerator,b.denominator),a.times(this.denominator,b.numerator)):typeof b=="number"?new a.Rational(this.numerator,a.times(this.denominator,b)):b.inverse().times(this)},b.prototype.inverse=function(){if(!a.isZero(this.numerator))return new a.Rational(this.denominator,this.numerator)},b.prototype.isEqual=function(b){return a.isEqual(a.times(this.numerator,b.denominator),a.times(this.denominator,b.numerator))},b.prototype.isZero=function(){return a.isZero(this.numerator)},b.prototype.minus=function(b){var c=this.numerator,d=this.denominator;return b.type==="rational"?new a.Rational(a.minus(a.times(c,b.denominator),a.times(d,b.numerator)),a.times(d,b.denominator)):typeof b=="number"?new a.Rational(a.minus(c,a.times(b,d)),d):b.minus(this).negative()},b.prototype.negative=function(){return new a.Rational(-this.numerator,this.denominator)},b.prototype.plus=function(b){var c=this.numerator,d=this.denominator;return b.type==="rational"?new a.Rational(a.plus(a.times(d,b.numerator),a.times(c,b.denominator)),a.times(d,b.denominator)):typeof b=="number"?new a.Rational(a.plus(c,a.times(b,d)),d):b.plus(this)},b.prototype.reduce=function(){var b=a.sign(this.denominator)*a.gcd([this.numerator,this.denominator]);return new a.Rational(this.numerator/b,this.denominator/b)},b.prototype.times=function(b){return b.type==="rational"?new a.Rational(a.times(this.numerator,b.numerator),a.times(this.denominator,b.denominator)):typeof b=="number"?new a.Rational(a.times(this.numerator,b),this.denominator):b.times(this)},b.prototype.toContentMathMLString=function(){return'<cn type="rational">'+this.numerator+"<sep/>"+this.denominator+"</cn>"},b.prototype.toLaTeX=function(){return"\\frac{"+a.toLaTeX(this.numerator)+"}{"+a.toLaTeX(this.denominator)+"}"},b.prototype.toMathMLString=function(){return"<mfrac>"+a.toMathMLString(this.numerator)+a.toMathMLString(this.denominator)+"</mfrac>"},b.prototype.toNumber=function(){return this.numerator/this.denominator},b.prototype.toString=function(){return a.toString(this.numerator)+"/"+a.toString(this.denominator)},b}();a.Rational=K;var L=function(){function b(c){var d=this;this.type="set",this.union=b.createSetOperation(!0,!0,!0),this.intersect=b.createSetOperation(!1,!0,!1),this.without=b.createSetOperation(!0,!1,!1),this.xor=b.createSetOperation(!0,!1,!0),c||(c=[]),c=c.sort(a.compare),c=c.filter(function(a,b,c){return a!==c[b+1]}),c.forEach(function(a,b){d[b]=a}),this.length=c.length,this.card=c.length}return b.prototype.compare=function(b){if(this.card!==b.card)return a.sign(this.card-b.card);var c=0,d=!1;return this.forEach(function(e,f){if(!d){var g=a.compare(e,b[f]);g!==0&&(c=g,d=!0)}}),c},b.prototype.every=function(){var a=[];for(var b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return Array.prototype.every.apply(this,a)},b.prototype.filter=function(){var b=[];for(var c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];return new a.Set(Array.prototype.filter.apply(this,b))},b.prototype.forEach=function(){var a=[];for(var b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];Array.prototype.forEach.apply(this,a)},b.fromTo=function(b,c,d){typeof d=="undefined"&&(d=1);var e,f=[];if(b<=c){for(e=b;e<=c;e+=d)f.push(e);return new a.Set(f)}},b.prototype.indexOf=function(){var a=[];for(var b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return Array.prototype.indexOf.apply(this,a)},b.prototype.insert=function(a){var b=this.locate(a);return this[b]!==a&&(this.splice(b,0,a),this.card++),this},b.prototype.isEmpty=function(){return this.card===0},b.prototype.isEqual=function(b){return this.card!==b.card?!1:this.every(function(c,d){return a.isEqual(c,b[d])})},b.prototype.isSubsetOf=function(a){return this.every(function(b){return a.indexOf(b)!==-1})},b.prototype.locate=function(a){var b=0,c=this.card-1,d,e=this.indexOf(a);if(e!==-1)return e;while(b<=c){d=b+Math.floor((c-b)/2);if(this[d]<a)b=d+1;else if(this[d]>a)c=d-1;else return d}return b},b.prototype.map=function(){var b=[];for(var c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];return new a.Set(Array.prototype.map.apply(this,b))},b.prototype.plus=function(b){var c=[];return arguments.length?b.type==="set"?(this.forEach(function(d){b.forEach(function(b){c.push(a.plus(d,b))})}),new a.Set(c)):this.map(function(c){return a.plus(c,b)}):a.plus.apply(null,this.toArray())},b.prototype.powerset=function(){var b=[],c,d,e,f,g,h;for(e=0,f=Math.pow(2,this.card);e<f;e++){c=e.toString(2).split("").reverse(),d=[];for(g=0,h=this.card;g<h;g++)c[g]==="1"&&d.push(this[g]);b.push(new a.Set(d))}return new a.Set(b)},b.prototype.reduce=function(){var a=[];for(var b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return Array.prototype.reduce.apply(this,arguments)},b.prototype.remove=function(a){var b=this.indexOf(a);return b!==-1&&(this.splice(b,1),this.card--),this},b.createSetOperation=function(b,c,d){return function(e){var f=[],g=0,h=0,i=this.card,j=e.card;while(g<i&&h<j){if(this[g]<e[h]){b&&f.push(this[g]),g++;continue}if(this[g]>e[h]){d&&f.push(e[h]),h++;continue}if(this[g]===e[h]){c&&f.push(this[g]),g++,h++;continue}}return b&&h===j?f=f.concat(this.slice(g)):d&&g===i&&(f=f.concat(e.slice(h))),new a.Set(f)}},b.prototype.slice=function(){var a=[];for(var b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return Array.prototype.slice.apply(this,a)},b.prototype.splice=function(){var a=[];for(var b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return Array.prototype.splice.apply(this,a)},b.prototype.times=function(b){return arguments.length?this.map(function(c){return a.times(c,b)}):a.times.apply(null,this.toArray())},b.prototype.toArray=function(){return Array.prototype.slice.call(this)},b.prototype.toContentMathMLString=function(){return this.isEmpty()?"<emptyset/>":this.reduce(function(b,c){return b+a.toContentMathMLString(c)},"<set>")+"</set>"},b.prototype.toLaTeX=function(){return this.isEmpty()?"\\emptyset":this.reduce(function(b,c){return b+a.toLaTeX(c)+", "},"\\{").slice(0,-2)+"\\}"},b.prototype.toMathMLString=function(){return this.isEmpty()?"<mi>&#x2205;</mi>":this.reduce(function(b,c){return b+a.toMathMLString(c)+"<mo>,</mo>"},"<mrow><mo>{</mo>").slice(0,-10)+"<mo>}</mo></mrow>"},b.prototype.toString=function(){return this.isEmpty()?"":"("+Array.prototype.join.call(this,", ")+")"},b}();a.Set=L})(MathLib||(MathLib={}));